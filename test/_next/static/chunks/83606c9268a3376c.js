(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43794,(e,t,r)=>{!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=l(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var a in e)r.call(e,a)&&e[a]&&(t=l(t,a));return t}(a)))}return e}function l(e,t){return t?e?e+" "+t:e+t:e}if(t.exports)n.default=n,t.exports=n;else if("function"==typeof define&&"object"==typeof define.amd&&define.amd)void 0!==n&&e.v(n);else window.classNames=n}()},17850,22709,e=>{"use strict";let t,r,n,l,a=new Set(["WPA","WPA2","WEP","NOPASS"]),i=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})(?::(\d{2}))?(?:Z|[+-]\d{2}:\d{2})?$/,s=[{type:"url",title:"URL",description:"Автодобавление схемы и базовая валидация",fields:[{name:"url",label:"Ссылка",placeholder:"example.com/page",prefill:"https://example.com",required:!0,validate:e=>{let t=e.trim();if(!t)return"Укажите ссылку";let r=t.startsWith("http")?t:`https://${t}`;try{if(!new URL(r).hostname.includes("."))return"Укажите корректный домен"}catch(e){return"Некорректный URL"}return null}}],buildPayload:e=>{let t=e.url?.trim()??"";return t?t.startsWith("http")?t:`https://${t}`:""}},{type:"text",title:"Текст",description:"Любой UTF-8 текст",fields:[{name:"text",label:"Текст",type:"textarea",placeholder:"Введите текст",prefill:"Привет из QR Suite!",required:!0}],buildPayload:e=>e.text??""},{type:"tel",title:"Телефон",description:"tap-to-call",fields:[{name:"phone",label:"Номер",placeholder:"+7 900 000-00-00",prefill:"+79991234567",required:!0,validate:e=>{let t=e.replace(/[^\d+]/g,"");return/^\+?[\d]{5,15}$/.test(t)?null:"Введите телефон в формате +79991234567"}}],buildPayload:e=>`tel:${e.phone?.replace(/[^\d+]/g,"")??""}`},{type:"sms",title:"SMS",description:"SMSTO: номер и текст",fields:[{name:"phone",label:"Номер",required:!0,placeholder:"+79001234567",prefill:"+79991234567"},{name:"message",label:"Сообщение",type:"textarea",placeholder:"Текст SMS",prefill:"Привет! Это демо сообщение."}],buildPayload:e=>{let t=e.phone?.replace(/[^\d+]/g,"")??"",r=encodeURIComponent(e.message??"");return`SMSTO:${t}:${r}`}},{type:"mailto",title:"Email",description:"mailto: адрес, тема, тело",fields:[{name:"address",label:"Email",type:"email",required:!0,prefill:"hello@example.com"},{name:"subject",label:"Тема",prefill:"Встреча"},{name:"body",label:"Сообщение",type:"textarea",prefill:"Коллеги, давайте синхронизируемся завтра."}],buildPayload:e=>{let t=new URLSearchParams;e.subject&&t.set("subject",e.subject),e.body&&t.set("body",e.body);let r=t.toString();return`mailto:${e.address??""}${r?`?${r}`:""}`}},{type:"geo",title:"Геометка",description:"Координаты lat,lng",fields:[{name:"lat",label:"Широта",required:!0,helper:"Напр. 59.9386",prefill:"59.9386",validate:e=>{if(!e.trim())return null;let t=Number(e.replace(",","."));return Number.isFinite(t)?t<-90||t>90?"Широта от -90 до 90":null:"Используйте числовое значение"}},{name:"lng",label:"Долгота",required:!0,helper:"Напр. 30.3141",prefill:"30.3141",validate:e=>{if(!e.trim())return null;let t=Number(e.replace(",","."));return Number.isFinite(t)?t<-180||t>180?"Долгота от -180 до 180":null:"Используйте числовое значение"}},{name:"label",label:"Описание",prefill:"Санкт-Петербург"}],buildPayload:e=>{let t=p(e.lat,90),r=p(e.lng,180);if(!t||!r)return"";let n=e.label?`?q=${encodeURIComponent(e.label)}`:"";return`geo:${t},${r}${n}`}},{type:"wifi",title:"Wi-Fi",description:"SSID, тип, пароль",fields:[{name:"ssid",label:"SSID",required:!0,prefill:"OfficeWiFi"},{name:"auth",label:"Шифрование",placeholder:"WPA, WPA2, WEP или nopass",helper:"nopass для открытых сетей",prefill:"WPA2",validate:e=>{if(!e.trim())return null;let t=e.trim().toUpperCase();return a.has(t)?null:"Допустимо: WPA, WPA2, WEP или nopass"}},{name:"password",label:"Пароль",prefill:"SuperSecure123",validate:(e,t)=>"nopass"===o(t.auth)||e.trim()?null:"Пароль обязателен для выбранного шифрования"},{name:"hidden",label:"Скрытая сеть (true/false)",placeholder:"false",prefill:"false",validate:e=>e.trim()?/^(true|false)$/i.test(e.trim())?null:"Введите true или false":null}],buildPayload:e=>{let t=e.ssid??"",r=o(e.auth),n=e.password??"",l="nopass"===r?"":`;P:${u(n)}`,a=e.hidden?.toLowerCase()==="true"?";H:true":"";return`WIFI:T:${r};S:${u(t)}${l}${a};;`}},{type:"vcard",title:"vCard",description:"Контакты vCard 3.0",fields:[{name:"firstName",label:"Имя",required:!0,prefill:"Иван"},{name:"lastName",label:"Фамилия",prefill:"Иванов"},{name:"organization",label:"Компания",prefill:"ООО «Пример»"},{name:"title",label:"Должность",prefill:"Менеджер"},{name:"phone",label:"Телефон",prefill:"+79991234567"},{name:"email",label:"Email",prefill:"ivan@example.com"},{name:"website",label:"Сайт",prefill:"https://example.com"},{name:"notes",label:"Заметки",type:"textarea",prefill:"Будьте на связи"}],buildPayload:e=>{let t=["BEGIN:VCARD","VERSION:3.0",`N:${e.lastName??""};${e.firstName??""};;;`,`FN:${[e.firstName,e.lastName].filter(Boolean).join(" ")}`];return e.organization&&t.push(`ORG:${e.organization}`),e.title&&t.push(`TITLE:${e.title}`),e.phone&&t.push(`TEL;TYPE=CELL:${e.phone}`),e.email&&t.push(`EMAIL;TYPE=INTERNET:${e.email}`),e.website&&t.push(`URL:${e.website}`),e.notes&&t.push(`NOTE:${e.notes}`),t.push("END:VCARD"),t.join("\n")}},{type:"mecard",title:"MeCard",description:"Компактный формат визитки",fields:[{name:"name",label:"Имя",required:!0,prefill:"Иван Иванов"},{name:"phone",label:"Телефон",prefill:"+79991234567"},{name:"email",label:"Email",prefill:"ivan@example.com"},{name:"address",label:"Адрес",type:"textarea",prefill:"Россия, Москва"},{name:"note",label:"Заметка",type:"textarea",prefill:"Добавьте меня в контакты"}],buildPayload:e=>{let t=[`MECARD:N:${e.name??""};`];return e.phone&&t.push(`TEL:${e.phone};`),e.email&&t.push(`EMAIL:${e.email};`),e.address&&t.push(`ADR:${e.address};`),e.note&&t.push(`NOTE:${e.note};`),t.push(";"),t.join("")}},{type:"ics",title:"Событие ICS",description:"iCalendar (VEVENT)",fields:[{name:"summary",label:"Заголовок",required:!0,prefill:"Командный созвон"},{name:"description",label:"Описание",type:"textarea",prefill:"Повестка: результаты спринта"},{name:"location",label:"Место",prefill:"Офис, переговорная 1"},{name:"start",label:"Начало (ISO 8601)",placeholder:"2024-03-12T10:00",prefill:"2024-03-12T10:00",validate:e=>{let t=e.trim();return t?d(t)?null:"Используйте формат ISO 8601":null}},{name:"end",label:"Конец (ISO 8601)",placeholder:"2024-03-12T12:00",prefill:"2024-03-12T11:00",validate:(e,t)=>{let r=e.trim();if(!r)return null;if(!d(r))return"Используйте формат ISO 8601";let n=t.start?.trim();return n&&d(n)&&new Date(r)<=new Date(n)?"Окончание должно быть позже начала":null}}],buildPayload:e=>{let t=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT"];return e.summary&&t.push(`SUMMARY:${e.summary}`),e.description&&t.push(`DESCRIPTION:${e.description}`),e.location&&t.push(`LOCATION:${e.location}`),e.start&&t.push(`DTSTART:${c(e.start)}`),e.end&&t.push(`DTEND:${c(e.end)}`),t.push("END:VEVENT","END:VCALENDAR"),t.join("\n")}}];function o(e){let t=(e??"").trim().toUpperCase();return"NOPASS"===t?"nopass":a.has(t)?t:"WPA"}function u(e){return(e??"").replace(/([\\;",:])/g,"\\$1")}function p(e,t){if(!e)return"";let r=Number(e.trim().replace(",","."));return!Number.isFinite(r)||Math.abs(r)>t?"":String(r)}function d(e){return!!e&&!!i.test(e)&&!Number.isNaN(new Date(e).getTime())}function c(e){if(!d(e))return e;try{return new Date(e).toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}catch(t){return e}}function f(e){let t=s.find(t=>t.type===e);if(!t)throw Error(`Unsupported QR type: ${e}`);return t}e.s(["QR_TYPES",0,s,"getTypeDefinition",()=>f],17850);var m=e.i(71645);let h=(e,t)=>t.some(t=>e instanceof t),b=new WeakMap,y=new WeakMap,E=new WeakMap,S={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return b.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return g(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function g(e){if(e instanceof IDBRequest){let t;return t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",l),e.removeEventListener("error",a)},l=()=>{t(g(e.result)),n()},a=()=>{r(e.error),n()};e.addEventListener("success",l),e.addEventListener("error",a)}),E.set(t,e),t}if(y.has(e))return y.get(e);let t=function(e){if("function"==typeof e)return(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(I(this),t),g(this.request)}:function(...t){return g(e.apply(I(this),t))};return(e instanceof IDBTransaction&&function(e){if(b.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",a),e.removeEventListener("abort",a)},l=()=>{t(),n()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",l),e.addEventListener("error",a),e.addEventListener("abort",a)});b.set(e,t)}(e),h(e,n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,S):e}(e);return t!==e&&(y.set(e,t),E.set(t,e)),t}let I=e=>E.get(e),v=["get","getKey","getAll","getAllKeys","count"],D=["put","add","delete","clear"],w=new Map;function N(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(w.get(t))return w.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,l=D.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(l||v.includes(r)))return;let a=async function(e,...t){let a=this.transaction(e,l?"readwrite":"readonly"),i=a.store;return n&&(i=i.index(t.shift())),(await Promise.all([i[r](...t),l&&a.done]))[0]};return w.set(t,a),a}S={...t=S,get:(e,r,n)=>N(e,r)||t.get(e,r,n),has:(e,r)=>!!N(e,r)||t.has(e,r)};let P=["continue","continuePrimaryKey","advance"],$={},T=new WeakMap,A=new WeakMap,L={get(e,t){if(!P.includes(t))return e[t];let r=$[t];return r||(r=$[t]=function(...e){T.set(this,A.get(this)[t](...e))}),r}};async function*x(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let r=new Proxy(t,L);for(A.set(r,t),E.set(r,I(t));t;)yield r,t=await (T.get(r)||t.continue()),T.delete(r)}function B(e,t){return t===Symbol.asyncIterator&&h(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&h(e,[IDBIndex,IDBObjectStore])}S={...r=S,get:(e,t,n)=>B(e,t)?x:r.get(e,t,n),has:(e,t)=>B(e,t)||r.has(e,t)};let O="drafts";async function C(){return function(e,t,{blocked:r,upgrade:n,blocking:l,terminated:a}={}){let i=indexedDB.open(e,1),s=g(i);return n&&i.addEventListener("upgradeneeded",e=>{n(g(i.result),e.oldVersion,e.newVersion,g(i.transaction),e)}),r&&i.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener("close",()=>a()),l&&e.addEventListener("versionchange",e=>l(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("qr-suite",0,{upgrade(e){e.objectStoreNames.contains(O)||e.createObjectStore(O)}})}async function R(e){let t=await C();return await t.get(O,e)??null}async function j(e,t){let r=await C();await r.put(O,t,e)}async function W(e){let t=await C();await t.delete(O,e)}function M(e,t){let[r,n]=(0,m.useState)(t),[l,a]=(0,m.useState)(!1);(0,m.useEffect)(()=>{let t=!0;return R(e).then(e=>{t&&e&&n(e),t&&a(!0)}),()=>{t=!1}},[e]),(0,m.useEffect)(()=>{l&&j(e,r).catch(e=>{console.warn("Не удалось сохранить черновик",e)})},[e,r,l]);let i=async()=>{n(t),await W(e)};return{value:r,setValue:n,hydrated:l,reset:i}}e.s(["useDraft",()=>M],22709)},69579,e=>{e.v(t=>Promise.all(["static/chunks/3c48ef58372c66d5.js"].map(t=>e.l(t))).then(()=>t(66174)))},35064,e=>{e.v(t=>Promise.all(["static/chunks/d82ffea2b057bdc1.js","static/chunks/c383f63c4b3ff0ae.js"].map(t=>e.l(t))).then(()=>t(28505)))},49191,e=>{e.v(t=>Promise.all(["static/chunks/6618f3c356199510.js"].map(t=>e.l(t))).then(()=>t(72692)))}]);