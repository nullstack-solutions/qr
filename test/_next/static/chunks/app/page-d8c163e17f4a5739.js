(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2019:function(e,t,r){Promise.resolve().then(r.bind(r,9875))},4930:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let a=r(6921);r(3827),r(4090);let l=a._(r(4795));function n(e,t){let r={loading:e=>{let{error:t,isLoading:r,pastDelay:a}=e;return null}};return"function"==typeof e&&(r.loader=e),(0,l.default)({...r,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9721:function(e,t,r){"use strict";function a(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),r(9775)},4795:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=r(3827),l=r(4090),n=r(9721);function s(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let i={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},r=(0,l.lazy)(()=>t.loader().then(s)),o=t.loading;function c(e){let s=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,a.jsx)(r,{...e}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(l.Suspense,{fallback:s,children:i})}return c.displayName="LoadableComponent",c}},9875:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return T}});var a=r(3827),l=r(4090),n=r(4930),s=r.n(n),i=r(6480),o=r.n(i),c=r(4113);function d(e){let t="";for(let r=0;r<e.length;r+=32768)t+=String.fromCharCode(...e.subarray(r,r+32768));return t}var u=r(9785);let p={PREVIEW:{LOGICAL_SIZE:512,MIN_CONTAINER_SIZE:280,MAX_CONTAINER_SIZE:800},EXPORT:{MIN_SIZE:256,MAX_SIZE:4096,DEFAULT_SIZE:1024,STEP:64},MARGIN:{MIN:0,MAX:20,DEFAULT:8,STEP:2}};function m(e,t){return Math.max(0,Math.round(e*t/100))}var h=r(1025),g=r.n(h);function v(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium";(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp)&&window.Telegram.WebApp.HapticFeedback.impactOccurred(t)}function f(e){let t=e.replace("#","");if(3===t.length)return{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16)};if(6!==t.length)return null;let r=parseInt(t.slice(0,2),16),a=parseInt(t.slice(2,4),16),l=parseInt(t.slice(4,6),16);return[r,a,l].some(e=>Number.isNaN(e))?null:{r,g:a,b:l}}function y(e){let{r:t,g:r,b:a}=e,l=[t,r,a].map(e=>{let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)});return .2126*l[0]+.7152*l[1]+.0722*l[2]}function b(e){return Math.round((null!=e?e:0)*180/Math.PI)}let x="http://www.w3.org/2000/svg";function N(e){return!Number.isFinite(e)||e<0?0:e>.6?.6:e}function j(e,t){var r;!function(e,t){let r=1-N(t);e.querySelectorAll("rect").forEach(e=>{let t=Number(e.getAttribute("width")),a=Number(e.getAttribute("height"));if(!t||!a||t>40||a>40)return;let l=Number(e.getAttribute("x")),n=Number(e.getAttribute("y"));if(!Number.isFinite(l)||!Number.isFinite(n))return;let s=t*r,i=a*r;e.setAttribute("x",(l+t/2-s/2).toFixed(3)),e.setAttribute("y",(n+a/2-i/2).toFixed(3)),e.setAttribute("width",s.toFixed(3)),e.setAttribute("height",i.toFixed(3))})}(e,N(Number(null!==(r=t.moduleSpacing)&&void 0!==r?r:0))),function(e,t){var r;let a=e.querySelector("image");if(!a)return;if("circle"!==t.shape){a.removeAttribute("clip-path");return}let l=Number(e.getAttribute("width"))||Number(t.width)||p.PREVIEW.LOGICAL_SIZE,n=Number(e.getAttribute("height"))||Number(t.height)||p.PREVIEW.LOGICAL_SIZE,s=Number(null!==(r=t.margin)&&void 0!==r?r:0),i=e.querySelector("defs");i||(i=e.ownerDocument.createElementNS(x,"defs"),e.insertBefore(i,e.firstChild));let o="qr-logo-circle-mask",c=i.querySelector("#".concat(o));c||((c=e.ownerDocument.createElementNS(x,"clipPath")).setAttribute("id",o),i.appendChild(c));let d=c.querySelector("circle");d||(d=e.ownerDocument.createElementNS(x,"circle"),c.appendChild(d)),d.setAttribute("cx",(l/2).toFixed(3)),d.setAttribute("cy",(n/2).toFixed(3)),d.setAttribute("r",Math.max(Math.max(0,Math.min(l,n)/2-s),0).toFixed(3)),a.setAttribute("clip-path","url(#".concat(o,")"))}(e,t)}let _={exportSize:p.EXPORT.DEFAULT_SIZE,marginPercent:p.MARGIN.DEFAULT,errorCorrection:"H",foreground:"#000000",background:"#ffffff",dotStyle:"rounded",eyeOuter:"square",eyeInner:"square",logoSize:18,shape:"square",dotSpacing:0,useDotsGradient:!1,dotsGradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#0b1220"},{offset:1,color:"#4a5568"}]},useBackgroundGradient:!1,backgroundGradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#ffffff"},{offset:1,color:"#f7fafc"}]},useCornersGradient:!1,cornersGradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#0b1220"},{offset:1,color:"#4a5568"}]},hideBackgroundDots:!0};function C(e,t){return"".concat(e,".").concat(t)}let G=[{name:"Классический",emoji:"⚫",fg:"#000000",bg:"#ffffff"},{name:"Современный",emoji:"\uD83D\uDD35",fg:"#667eea",bg:"#f0f4ff"},{name:"Природа",emoji:"\uD83C\uDF3F",fg:"#2d5016",bg:"#f5f1e8"},{name:"Закат",emoji:"\uD83C\uDF05",fg:"#ff6b35",bg:"#ffe5d9"}],S=[{type:"url",emoji:"\uD83C\uDF10",name:"URL",desc:"Ссылка на сайт"},{type:"text",emoji:"\uD83D\uDCC4",name:"Текст",desc:"Произвольный текст"},{type:"tel",emoji:"\uD83D\uDCDE",name:"Телефон",desc:"Звонок"},{type:"sms",emoji:"\uD83D\uDCAC",name:"SMS",desc:"Сообщение"},{type:"mailto",emoji:"\uD83D\uDCE7",name:"Email",desc:"Почта"},{type:"geo",emoji:"\uD83D\uDCCD",name:"Геометка",desc:"Координаты"},{type:"wifi",emoji:"\uD83D\uDCF6",name:"Wi-Fi",desc:"Подключение"},{type:"vcard",emoji:"\uD83D\uDC64",name:"vCard",desc:"Визитка"},{type:"mecard",emoji:"\uD83D\uDCB3",name:"MeCard",desc:"Компакт визитка"},{type:"ics",emoji:"\uD83D\uDCC5",name:"Событие",desc:"Календарь"}],D=[{id:"square",emoji:"⬛",label:"Квадраты",dotStyle:"square"},{id:"dots",emoji:"⚫",label:"Точки",dotStyle:"dots"},{id:"rounded",emoji:"\uD83D\uDD18",label:"Скругленные",dotStyle:"rounded"},{id:"elegant",emoji:"\uD83D\uDC8E",label:"Элегантный",dotStyle:"extra-rounded"}],E=[{value:"square",label:"Квадраты"},{value:"rounded",label:"Скругленные"},{value:"extra-rounded",label:"Очень скругленные"},{value:"dots",label:"Точки"},{value:"classy",label:"Classy"},{value:"classy-rounded",label:"Classy Rounded"}],I=[{value:"square",label:"Квадрат"},{value:"extra-rounded",label:"Скруглённый"},{value:"dot",label:"Точка"}],A=[{value:"square",label:"Квадрат"},{value:"dot",label:"Точка"}],k=[{value:"square",label:"Квадрат"},{value:"circle",label:"Круг"}];function P(){var e,t,n,s,i,h,x,N,P,w,R,L,M,T,O,B,q,F,U;let{value:V,setValue:W,hydrated:z}=(0,u.L)("generator",{type:"url",formValues:{},style:_}),H=(0,l.useMemo)(()=>{let e={...V.style};if(!e.exportSize&&e.size&&(e.exportSize=e.size,delete e.size),void 0===e.marginPercent&&void 0!==e.margin){let t=e.margin;e.marginPercent=Math.min(p.MARGIN.MAX,Math.max(p.MARGIN.MIN,2*t)),delete e.margin}return e.exportSize||(e.exportSize=p.EXPORT.DEFAULT_SIZE),void 0===e.marginPercent&&(e.marginPercent=p.MARGIN.DEFAULT),{...V,style:e}},[V]),[Z,X]=(0,l.useState)("content"),[Q,K]=(0,l.useState)(""),[Y,$]=(0,l.useState)({}),[J,ee]=(0,l.useState)(0),[et,er]=(0,l.useState)(null),[ea,el]=(0,l.useState)(!1),en=(0,l.useRef)(null),es=(0,l.useRef)(null),ei=(0,l.useCallback)(()=>{let e=en.current;if(!e)return;let t=e.getBoundingClientRect(),r=t.width||e.clientWidth||e.offsetWidth,a=t.height||e.clientHeight||e.offsetHeight||r;e.style.width="100%",e.style.height="100%",e.style.maxWidth="100%",e.style.maxHeight="100%",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.overflow="hidden";let l=e.firstElementChild;l&&(l.style.width="100%",l.style.height="100%",l.style.maxWidth="100%",l.style.maxHeight="100%",l.style.display="flex",l.style.alignItems="center",l.style.justifyContent="center",l.style.overflow="hidden");let n=(e,t,l)=>{if(!t||!l){e.style.removeProperty("width"),e.style.removeProperty("height"),e.style.removeProperty("transform"),e.style.removeProperty("aspectRatio");return}let n=Math.min(1,Math.max(r||t,1)/t,Math.max(a||l,1)/l),s=l*n;e.style.width="".concat(t*n,"px"),e.style.height="".concat(s,"px"),e.style.maxWidth="100%",e.style.maxHeight="100%",e.style.aspectRatio="".concat(t," / ").concat(l),e.style.transform="translateZ(0)"},s=e.querySelector("svg");if(s){s.setAttribute("preserveAspectRatio","xMidYMid meet");let e=p.PREVIEW.LOGICAL_SIZE,t=p.PREVIEW.LOGICAL_SIZE,r=Number(s.getAttribute("width")),a=Number(s.getAttribute("height"));if(s instanceof SVGSVGElement){var i;let l=null===(i=s.viewBox)||void 0===i?void 0:i.baseVal;e=(null==l?void 0:l.width)||r||e,t=(null==l?void 0:l.height)||a||t}else e=r||e,t=a||t;n(s,e,t)}let o=e.querySelector("canvas");if(o){let e=o.width||p.PREVIEW.LOGICAL_SIZE,t=o.height||p.PREVIEW.LOGICAL_SIZE;n(o,e,t)}},[]),eo=(0,l.useCallback)(()=>{window.requestAnimationFrame(()=>{ei()})},[ei]),ec=(0,l.useMemo)(()=>(0,c.x)(H.type),[H.type]),ed=(0,l.useCallback)(e=>{W(t=>({...t,style:{...t.style,...e}}))},[W]),eu=(0,l.useCallback)(e=>{ed({marginPercent:Math.min(p.MARGIN.MAX,Math.max(p.MARGIN.MIN,Math.round(e)))}),eo()},[eo,ed]),ep=(0,l.useCallback)(e=>{ed({exportSize:Math.min(p.EXPORT.MAX_SIZE,Math.max(p.EXPORT.MIN_SIZE,Math.round(e/p.EXPORT.STEP)*p.EXPORT.STEP))})},[ed]),em=(e,t)=>{let r=H.style[e];r&&ed({[e]:t(r)})},eh=(e,t)=>{v("light"),em(e,e=>({...e,type:t}))},eg=(e,t)=>{em(e,e=>({...e,rotation:t*Math.PI/180}))},ev=(e,t,r)=>{em(e,e=>({...e,colorStops:e.colorStops.map((e,a)=>a===t?{...e,color:r}:e)}))},ef=(0,l.useCallback)((e,t)=>{W(r=>({...r,formValues:{...r.formValues,[C(r.type,e)]:t}}))},[W]),ey=(0,l.useCallback)(e=>{v("light"),$({}),W(t=>({...t,type:e,formValues:t.formValues,style:t.style}))},[W]),eb=(0,l.useMemo)(()=>{var e;return null!==(e=({L:15,M:20,Q:25,H:30})[H.style.errorCorrection])&&void 0!==e?e:30},[H.style.errorCorrection]),ex=!!(H.style.logoDataUrl&&H.style.logoSize>eb);(0,l.useEffect)(()=>{void 0===H.style.dotSpacing&&ed({dotSpacing:_.dotSpacing})},[H.style.dotSpacing,ed]),(0,l.useEffect)(()=>{H.style.logoDataUrl&&H.style.logoSize>eb&&ed({logoSize:eb})},[H.style.logoDataUrl,H.style.logoSize,eb,ed]),(0,l.useEffect)(()=>{Promise.all([r.e(587),r.e(620)]).then(r.t.bind(r,5439,23)).then(e=>{er(()=>e.default)})},[]);let eN=(0,l.useCallback)(e=>{if(!e){v("light"),ed({logoDataUrl:void 0});return}if(!e.type.startsWith("image/")){v("light");return}let t=new FileReader;t.onload=()=>{v("medium"),ed({logoDataUrl:t.result})},t.readAsDataURL(e)},[ed]);(0,l.useEffect)(()=>{if(en.current&&et&&!es.current){let e=p.PREVIEW.LOGICAL_SIZE,t=m(e,H.style.marginPercent),r=new et({type:"svg",width:e,height:e,data:"https://t.me/durov",image:void 0,margin:t,qrOptions:{errorCorrectionLevel:H.style.errorCorrection,mode:"Byte"},imageOptions:{hideBackgroundDots:H.style.hideBackgroundDots,imageSize:H.style.logoSize/100,margin:4,saveAsBlob:!0}});es.current=r,r.append(en.current),r.applyExtension(j),eo()}},[et,H.style.errorCorrection,H.style.hideBackgroundDots,H.style.logoSize,H.style.marginPercent,eo]);let ej=(0,l.useMemo)(()=>{let e={};for(let t of ec.fields){let r=C(H.type,t.name),a=H.formValues[r];void 0===a&&void 0!==t.prefill?e[t.name]=t.prefill:e[t.name]=null!=a?a:""}return e},[H.formValues,H.type,ec.fields]),e_=(0,l.useMemo)(()=>(function(e,t){let r=f(e),a=f(t);if(!r||!a)return 0;let l=y(r)+.05,n=y(a)+.05;return l>n?l/n:n/l})(H.style.foreground,H.style.background),[H.style.foreground,H.style.background]),eC=null!==(M=null===(t=H.style.dotsGradient)||void 0===t?void 0:null===(e=t.colorStops[0])||void 0===e?void 0:e.color)&&void 0!==M?M:"#0b1220",eG=null!==(T=null===(s=H.style.dotsGradient)||void 0===s?void 0:null===(n=s.colorStops[1])||void 0===n?void 0:n.color)&&void 0!==T?T:"#4a5568",eS=null!==(O=null===(h=H.style.backgroundGradient)||void 0===h?void 0:null===(i=h.colorStops[0])||void 0===i?void 0:i.color)&&void 0!==O?O:"#ffffff",eD=null!==(B=null===(N=H.style.backgroundGradient)||void 0===N?void 0:null===(x=N.colorStops[1])||void 0===x?void 0:x.color)&&void 0!==B?B:"#f7fafc",eE=null!==(q=null===(w=H.style.cornersGradient)||void 0===w?void 0:null===(P=w.colorStops[0])||void 0===P?void 0:P.color)&&void 0!==q?q:"#0b1220",eI=null!==(F=null===(L=H.style.cornersGradient)||void 0===L?void 0:null===(R=L.colorStops[1])||void 0===R?void 0:R.color)&&void 0!==F?F:"#4a5568",eA=(0,l.useCallback)(()=>{var e,t;if(!es.current)return!1;let r=ec.buildPayload(ej),a=new TextEncoder().encode(r),l=a.length;ee(l);let n={};if(ec.fields.forEach(e=>{var t;let r=null!==(t=ej[e.name])&&void 0!==t?t:"";if(e.required&&!r.trim()){n[e.name]="Обязательное поле";return}if(e.validate){let t=e.validate(r,ej);t&&(n[e.name]=t)}e.pattern&&r&&!e.pattern.test(r)&&(n[e.name]="Некорректное значение")}),r||(n.__payload="Заполните обязательные поля"),l>2953&&(n.__payload="Предел ".concat(2953," байт, сейчас ").concat(l)),$(n),Object.keys(n).length>0)return v("light"),!1;v("medium"),K(r);let s=p.PREVIEW.LOGICAL_SIZE,i=m(s,H.style.marginPercent),o={type:"svg",data:d(a),width:s,height:s,image:H.style.logoDataUrl,shape:H.style.shape,margin:i,moduleSpacing:(null!==(t=H.style.dotSpacing)&&void 0!==t?t:0)/100,qrOptions:{errorCorrectionLevel:H.style.errorCorrection,mode:"Byte"},dotsOptions:{...H.style.useDotsGradient&&H.style.dotsGradient?{gradient:H.style.dotsGradient}:{color:H.style.foreground},type:H.style.dotStyle},backgroundOptions:{...H.style.useBackgroundGradient&&H.style.backgroundGradient?{gradient:H.style.backgroundGradient}:{color:H.style.background}},cornersSquareOptions:{...H.style.useCornersGradient&&H.style.cornersGradient?{gradient:H.style.cornersGradient}:{color:H.style.foreground},type:H.style.eyeOuter},cornersDotOptions:{...H.style.useCornersGradient&&H.style.cornersGradient?{gradient:H.style.cornersGradient}:{color:H.style.foreground},type:H.style.eyeInner},imageOptions:{imageSize:H.style.logoSize/100,margin:4,hideBackgroundDots:H.style.hideBackgroundDots,saveAsBlob:!0}},c=()=>{var e;null===(e=es.current)||void 0===e||e.applyExtension(j),eo()},u=null===(e=es.current)||void 0===e?void 0:e.update(o);return u&&"function"==typeof u.then?u.finally(c):c(),!0},[ec,ej,H.style,eo]);(0,l.useEffect)(()=>{es.current&&eA()},[et,eA]),(0,l.useEffect)(()=>{z&&es.current&&eA()},[eA,z]),(0,l.useEffect)(()=>{eo()},[H.style.marginPercent,eo]);let ek=(0,l.useCallback)(async e=>{if(es.current&&eA()){el(!0),v("heavy");try{var t;let r=Q||ec.buildPayload(ej),a=new TextEncoder().encode(r),l=H.style.exportSize,n=m(l,H.style.marginPercent),s={type:"svg",data:d(a),width:l,height:l,image:H.style.logoDataUrl,shape:H.style.shape,margin:n,moduleSpacing:(null!==(t=H.style.dotSpacing)&&void 0!==t?t:0)/100,qrOptions:{errorCorrectionLevel:H.style.errorCorrection,mode:"Byte"},dotsOptions:{...H.style.useDotsGradient&&H.style.dotsGradient?{gradient:H.style.dotsGradient}:{color:H.style.foreground},type:H.style.dotStyle},backgroundOptions:{...H.style.useBackgroundGradient&&H.style.backgroundGradient?{gradient:H.style.backgroundGradient}:{color:H.style.background}},cornersSquareOptions:{...H.style.useCornersGradient&&H.style.cornersGradient?{gradient:H.style.cornersGradient}:{color:H.style.foreground},type:H.style.eyeOuter},cornersDotOptions:{...H.style.useCornersGradient&&H.style.cornersGradient?{gradient:H.style.cornersGradient}:{color:H.style.foreground},type:H.style.eyeInner},imageOptions:{imageSize:H.style.logoSize/100,margin:4,hideBackgroundDots:H.style.hideBackgroundDots,saveAsBlob:!0}},i=new et(s);i.applyExtension(j);let o=await i.getRawData(e);if(!o)return;let c=r.slice(0,32).replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"").toLowerCase()||"qr",u="".concat(c,".").concat(e),p="svg"===e?"image/svg+xml":"image/png",h=window.navigator;if(h&&"function"==typeof h.share&&"undefined"!=typeof File){let e="function"==typeof h.canShare,t=new File([o],u,{type:p});if(!e||h.canShare({files:[t]}))try{await h.share({files:[t],title:"QR код",text:r});return}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return}}let g=URL.createObjectURL(o);try{let e=document.createElement("a");e.href=g,e.download=u,document.body.appendChild(e),e.click(),document.body.removeChild(e)}finally{URL.revokeObjectURL(g)}}finally{el(!1)}}},[eA,Q,ec,ej,H.style,et]),eP=e=>{let t=f(e);return!!t&&y(t)>.5};return(0,a.jsxs)("section",{className:g().generator,children:[(0,a.jsx)("div",{className:g().qrPreview,children:(0,a.jsx)("div",{className:g().qrCode,children:(0,a.jsx)("div",{ref:en,className:g().qrCanvas})})}),(0,a.jsxs)("div",{className:g().tabs,children:[(0,a.jsx)("button",{className:o()(g().tab,{[g().tabActive]:"content"===Z}),onClick:()=>{X("content"),v("light")},children:"\uD83D\uDCDD Контент"}),(0,a.jsx)("button",{className:o()(g().tab,{[g().tabActive]:"style"===Z}),onClick:()=>{X("style"),v("light")},children:"\uD83C\uDFA8 Стиль"}),(0,a.jsx)("button",{className:o()(g().tab,{[g().tabActive]:"advanced"===Z}),onClick:()=>{X("advanced"),v("light")},children:"⚙️ Продвинутые"})]}),(0,a.jsxs)("div",{className:o()(g().tabContent,{[g().tabContentActive]:"content"===Z}),children:[(0,a.jsxs)("div",{className:g().inputGroup,children:[(0,a.jsx)("label",{className:g().inputLabel,children:(0,a.jsx)("span",{children:"Выберите тип QR-кода"})}),(0,a.jsx)("div",{className:g().templateGrid,children:S.map(e=>(0,a.jsxs)("div",{className:o()(g().templateCard,{[g().templateCardActive]:H.type===e.type}),onClick:()=>ey(e.type),children:[(0,a.jsxs)("div",{className:g().templateName,children:[e.emoji," ",e.name]}),(0,a.jsx)("div",{className:g().templateDesc,children:e.desc})]},e.type))})]}),(0,a.jsx)("div",{className:g().divider}),(0,a.jsxs)("div",{className:g().inputGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:ec.title}),(0,a.jsx)("span",{className:g().badge,children:ec.description})]}),ec.fields.map(e=>{var t,r;return(0,a.jsxs)("div",{className:g().inputGroup,children:[(0,a.jsx)("label",{className:g().inputLabel,children:(0,a.jsxs)("span",{children:[e.label,e.required&&" *"]})}),"textarea"===e.type?(0,a.jsx)("textarea",{className:o()(g().textarea,{error:!!Y[e.name]}),value:null!==(t=ej[e.name])&&void 0!==t?t:"",onChange:t=>ef(e.name,t.target.value),placeholder:e.placeholder}):(0,a.jsx)("input",{type:"email"===e.type?"email":"number"===e.type?"number":"text",className:o()(g().input,{error:!!Y[e.name]}),value:null!==(r=ej[e.name])&&void 0!==r?r:"",onChange:t=>ef(e.name,t.target.value),placeholder:e.placeholder}),e.helper&&(0,a.jsx)("small",{style:{fontSize:"12px",opacity:.6,marginTop:"4px"},children:e.helper}),Y[e.name]&&(0,a.jsx)("span",{className:"error-text",children:Y[e.name]})]},e.name)}),Y.__payload&&(0,a.jsx)("span",{className:"error-text",children:Y.__payload})]}),(0,a.jsxs)("div",{className:g().infoCard,children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Совет:"})," Используйте короткие данные для лучшего сканирования QR-кода. Длина: ",J," / ",2953," байт"]})]}),(0,a.jsxs)("div",{className:o()(g().tabContent,{[g().tabContentActive]:"style"===Z}),children:[(0,a.jsxs)("div",{className:g().inputGroup,children:[(0,a.jsx)("label",{className:g().inputLabel,children:(0,a.jsx)("span",{children:"\uD83C\uDFAD Стиль QR-кода"})}),(0,a.jsx)("div",{className:g().styleGrid,children:D.map(e=>(0,a.jsxs)("div",{className:o()(g().styleOption,{[g().styleOptionActive]:H.style.dotStyle===e.dotStyle}),onClick:()=>{ed({dotStyle:e.dotStyle}),v("light")},children:[(0,a.jsx)("div",{className:g().stylePreview,children:e.emoji}),(0,a.jsx)("div",{className:g().styleLabel,children:e.label})]},e.id))})]}),(0,a.jsx)("div",{className:g().divider}),(0,a.jsxs)("div",{className:g().inputGroup,children:[(0,a.jsx)("label",{className:g().inputLabel,children:(0,a.jsx)("span",{children:"\uD83C\uDFA8 Цветовая схема"})}),(0,a.jsxs)("div",{className:g().colorPickerGroup,children:[(0,a.jsxs)("div",{className:g().colorPicker,children:[(0,a.jsx)("label",{className:g().inputLabel,style:{marginBottom:"8px"},children:"Передний план"}),(0,a.jsx)("div",{className:g().colorPreview,style:{background:H.style.foreground,color:eP(H.style.foreground)?"#000":"#fff"},children:H.style.foreground.toUpperCase()}),(0,a.jsx)("input",{type:"color",className:g().colorInput,value:H.style.foreground,onChange:e=>ed({foreground:e.target.value})})]}),(0,a.jsxs)("div",{className:g().colorPicker,children:[(0,a.jsx)("label",{className:g().inputLabel,style:{marginBottom:"8px"},children:"Фон"}),(0,a.jsx)("div",{className:g().colorPreview,style:{background:H.style.background,color:eP(H.style.background)?"#000":"#fff"},children:H.style.background.toUpperCase()}),(0,a.jsx)("input",{type:"color",className:g().colorInput,value:H.style.background,onChange:e=>ed({background:e.target.value})})]})]})]}),e_>0&&e_<4.5&&(0,a.jsxs)("div",{className:o()(g().infoCard,g().infoCardWarning),children:["⚠️ ",(0,a.jsx)("strong",{children:"Низкий контраст:"})," текущее соотношение ",e_.toFixed(2),":1."," ","Подберите более контрастные цвета для лучшей сканируемости QR-кода."]}),(0,a.jsx)("div",{className:g().divider}),(0,a.jsxs)("div",{className:g().inputGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:"\uD83E\uDDE9 Геометрия"}),(0,a.jsx)("span",{className:g().badge,children:"Форма и глазки"})]}),(0,a.jsxs)("div",{className:g().fieldGrid,children:[(0,a.jsxs)("label",{className:g().fieldControl,children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Форма QR"}),(0,a.jsx)("select",{className:g().select,value:H.style.shape,onChange:e=>{ed({shape:e.target.value}),v("light")},children:k.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("label",{className:g().fieldControl,children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Стиль точек"}),(0,a.jsx)("select",{className:g().select,value:H.style.dotStyle,onChange:e=>{ed({dotStyle:e.target.value}),v("light")},children:E.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("label",{className:g().fieldControl,children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Внешние глазки"}),(0,a.jsx)("select",{className:g().select,value:H.style.eyeOuter,onChange:e=>{ed({eyeOuter:e.target.value}),v("light")},children:I.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("label",{className:g().fieldControl,children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Внутренние глазки"}),(0,a.jsx)("select",{className:g().select,value:H.style.eyeInner,onChange:e=>{ed({eyeInner:e.target.value}),v("light")},children:A.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:g().rangeGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:"↔️ Расстояние между точками"}),(0,a.jsxs)("span",{className:g().rangeValue,children:[H.style.dotSpacing,"%"]})]}),(0,a.jsx)("input",{type:"range",className:g().rangeInput,min:0,max:60,step:5,value:null!==(U=H.style.dotSpacing)&&void 0!==U?U:0,onChange:e=>{ed({dotSpacing:Number(e.target.value)}),v("light")}}),(0,a.jsx)("div",{className:g().rangeHint,children:"0% — плотная сетка, 60% — заметные промежутки."})]})]}),(0,a.jsx)("div",{className:g().divider}),(0,a.jsxs)("div",{className:g().inputGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:"\uD83C\uDF08 Градиенты"}),(0,a.jsx)("span",{className:g().badge,children:"Расширенный цвет"})]}),(0,a.jsxs)("div",{className:g().gradientSection,children:[(0,a.jsxs)("div",{className:g().gradientBlock,children:[(0,a.jsxs)("div",{className:g().gradientHeader,children:[(0,a.jsx)("div",{className:g().gradientName,children:"Точки"}),(0,a.jsxs)("label",{className:g().checkboxRow,children:[(0,a.jsx)("input",{type:"checkbox",checked:H.style.useDotsGradient,onChange:e=>{ed({useDotsGradient:e.target.checked}),v("light")}}),(0,a.jsx)("span",{children:"Использовать градиент"})]})]}),H.style.useDotsGradient&&H.style.dotsGradient&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Тип градиента"}),(0,a.jsxs)("select",{className:g().select,value:H.style.dotsGradient.type,onChange:e=>eh("dotsGradient",e.target.value),children:[(0,a.jsx)("option",{value:"linear",children:"Линейный"}),(0,a.jsx)("option",{value:"radial",children:"Радиальный"})]})]}),"linear"===H.style.dotsGradient.type&&(0,a.jsxs)("div",{className:g().rangeGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:"Угол поворота"}),(0,a.jsx)("span",{className:g().rangeValue,children:"".concat(b(H.style.dotsGradient.rotation),"\xb0")})]}),(0,a.jsx)("input",{type:"range",className:g().rangeInput,min:0,max:360,value:b(H.style.dotsGradient.rotation),onChange:e=>eg("dotsGradient",Number(e.target.value))})]}),(0,a.jsxs)("div",{className:g().gradientColorGroup,children:[(0,a.jsxs)("div",{className:o()(g().colorPicker,g().gradientColorItem),children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Начальный цвет"}),(0,a.jsx)("div",{className:g().colorPreview,style:{background:eC,color:eP(eC)?"#000":"#fff"},children:eC.toUpperCase()}),(0,a.jsx)("input",{type:"color",className:g().colorInput,value:eC,onChange:e=>ev("dotsGradient",0,e.target.value)})]}),(0,a.jsxs)("div",{className:o()(g().colorPicker,g().gradientColorItem),children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Конечный цвет"}),(0,a.jsx)("div",{className:g().colorPreview,style:{background:eG,color:eP(eG)?"#000":"#fff"},children:eG.toUpperCase()}),(0,a.jsx)("input",{type:"color",className:g().colorInput,value:eG,onChange:e=>ev("dotsGradient",1,e.target.value)})]})]})]})]}),(0,a.jsxs)("div",{className:g().gradientBlock,children:[(0,a.jsxs)("div",{className:g().gradientHeader,children:[(0,a.jsx)("div",{className:g().gradientName,children:"Фон"}),(0,a.jsxs)("label",{className:g().checkboxRow,children:[(0,a.jsx)("input",{type:"checkbox",checked:H.style.useBackgroundGradient,onChange:e=>{ed({useBackgroundGradient:e.target.checked}),v("light")}}),(0,a.jsx)("span",{children:"Использовать градиент"})]})]}),H.style.useBackgroundGradient&&H.style.backgroundGradient&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Тип градиента"}),(0,a.jsxs)("select",{className:g().select,value:H.style.backgroundGradient.type,onChange:e=>eh("backgroundGradient",e.target.value),children:[(0,a.jsx)("option",{value:"linear",children:"Линейный"}),(0,a.jsx)("option",{value:"radial",children:"Радиальный"})]})]}),"linear"===H.style.backgroundGradient.type&&(0,a.jsxs)("div",{className:g().rangeGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:"Угол поворота"}),(0,a.jsx)("span",{className:g().rangeValue,children:"".concat(b(H.style.backgroundGradient.rotation),"\xb0")})]}),(0,a.jsx)("input",{type:"range",className:g().rangeInput,min:0,max:360,value:b(H.style.backgroundGradient.rotation),onChange:e=>eg("backgroundGradient",Number(e.target.value))})]}),(0,a.jsxs)("div",{className:g().gradientColorGroup,children:[(0,a.jsxs)("div",{className:o()(g().colorPicker,g().gradientColorItem),children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Начальный цвет"}),(0,a.jsx)("div",{className:g().colorPreview,style:{background:eS,color:eP(eS)?"#000":"#fff"},children:eS.toUpperCase()}),(0,a.jsx)("input",{type:"color",className:g().colorInput,value:eS,onChange:e=>ev("backgroundGradient",0,e.target.value)})]}),(0,a.jsxs)("div",{className:o()(g().colorPicker,g().gradientColorItem),children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Конечный цвет"}),(0,a.jsx)("div",{className:g().colorPreview,style:{background:eD,color:eP(eD)?"#000":"#fff"},children:eD.toUpperCase()}),(0,a.jsx)("input",{type:"color",className:g().colorInput,value:eD,onChange:e=>ev("backgroundGradient",1,e.target.value)})]})]})]})]}),(0,a.jsxs)("div",{className:g().gradientBlock,children:[(0,a.jsxs)("div",{className:g().gradientHeader,children:[(0,a.jsx)("div",{className:g().gradientName,children:"Углы"}),(0,a.jsxs)("label",{className:g().checkboxRow,children:[(0,a.jsx)("input",{type:"checkbox",checked:H.style.useCornersGradient,onChange:e=>{ed({useCornersGradient:e.target.checked}),v("light")}}),(0,a.jsx)("span",{children:"Использовать градиент"})]})]}),H.style.useCornersGradient&&H.style.cornersGradient&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Тип градиента"}),(0,a.jsxs)("select",{className:g().select,value:H.style.cornersGradient.type,onChange:e=>eh("cornersGradient",e.target.value),children:[(0,a.jsx)("option",{value:"linear",children:"Линейный"}),(0,a.jsx)("option",{value:"radial",children:"Радиальный"})]})]}),"linear"===H.style.cornersGradient.type&&(0,a.jsxs)("div",{className:g().rangeGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:"Угол поворота"}),(0,a.jsx)("span",{className:g().rangeValue,children:"".concat(b(H.style.cornersGradient.rotation),"\xb0")})]}),(0,a.jsx)("input",{type:"range",className:g().rangeInput,min:0,max:360,value:b(H.style.cornersGradient.rotation),onChange:e=>eg("cornersGradient",Number(e.target.value))})]}),(0,a.jsxs)("div",{className:g().gradientColorGroup,children:[(0,a.jsxs)("div",{className:o()(g().colorPicker,g().gradientColorItem),children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Начальный цвет"}),(0,a.jsx)("div",{className:g().colorPreview,style:{background:eE,color:eP(eE)?"#000":"#fff"},children:eE.toUpperCase()}),(0,a.jsx)("input",{type:"color",className:g().colorInput,value:eE,onChange:e=>ev("cornersGradient",0,e.target.value)})]}),(0,a.jsxs)("div",{className:o()(g().colorPicker,g().gradientColorItem),children:[(0,a.jsx)("span",{className:g().fieldTitle,children:"Конечный цвет"}),(0,a.jsx)("div",{className:g().colorPreview,style:{background:eI,color:eP(eI)?"#000":"#fff"},children:eI.toUpperCase()}),(0,a.jsx)("input",{type:"color",className:g().colorInput,value:eI,onChange:e=>ev("cornersGradient",1,e.target.value)})]})]})]})]})]})]}),(0,a.jsx)("div",{className:g().divider}),(0,a.jsxs)("div",{className:g().inputGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:"\uD83E\uDEAA Логотип в центре"}),(0,a.jsx)("span",{className:g().badge,children:H.style.logoDataUrl?"Макс ".concat(eb,"% при ").concat(H.style.errorCorrection):"Рекомендуем Q или H"})]}),(0,a.jsxs)("div",{className:g().logoControls,children:[(0,a.jsxs)("div",{className:g().logoButtons,children:[(0,a.jsxs)("label",{className:g().logoUploadButton,children:[(0,a.jsx)("input",{type:"file",accept:"image/png,image/jpeg,image/svg+xml",className:g().logoUploadInput,onChange:e=>{var t,r;return eN(null!==(r=null===(t=e.target.files)||void 0===t?void 0:t[0])&&void 0!==r?r:null)}}),H.style.logoDataUrl?"Заменить логотип":"Загрузить логотип"]}),H.style.logoDataUrl&&(0,a.jsx)("button",{type:"button",className:g().logoRemoveButton,onClick:()=>eN(null),children:"Удалить"})]}),H.style.logoDataUrl&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:g().logoPreview,children:[(0,a.jsx)("img",{src:H.style.logoDataUrl,alt:"Предпросмотр логотипа"}),(0,a.jsx)("div",{className:g().logoHint,children:"Логотип будет размещён по центру QR-кода."})]}),(0,a.jsxs)("div",{className:g().rangeGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:"Размер логотипа"}),(0,a.jsxs)("span",{className:g().rangeValue,children:[Math.min(H.style.logoSize,eb),"%"]})]}),(0,a.jsx)("input",{type:"range",className:g().rangeInput,min:10,max:eb,value:Math.min(H.style.logoSize,eb),onChange:e=>ed({logoSize:Number(e.target.value)})})]}),(0,a.jsxs)("label",{className:g().checkboxRow,children:[(0,a.jsx)("input",{type:"checkbox",checked:H.style.hideBackgroundDots,onChange:e=>ed({hideBackgroundDots:e.target.checked})}),(0,a.jsx)("span",{children:"Скрыть точки под логотипом"})]}),ex&&(0,a.jsxs)("div",{className:o()(g().infoCard,g().infoCardWarning),children:["⚠️ Логотип автоматически уменьшен до ",eb,"% из-за текущего уровня коррекции ошибок. Увеличьте коррекцию для более крупного изображения."]})]})]})]}),(0,a.jsx)("div",{className:g().divider}),(0,a.jsx)("div",{className:g().templateGrid,children:G.map(e=>(0,a.jsxs)("div",{className:g().templateCard,onClick:()=>{ed({foreground:e.fg,background:e.bg}),v("medium")},children:[(0,a.jsxs)("div",{className:g().templateName,children:[e.emoji," ",e.name]}),(0,a.jsxs)("div",{className:g().templateDesc,children:[e.fg," / ",e.bg]})]},e.name))})]}),(0,a.jsxs)("div",{className:o()(g().tabContent,{[g().tabContentActive]:"advanced"===Z}),children:[(0,a.jsxs)("div",{className:g().infoCard,children:["ℹ️ ",(0,a.jsx)("strong",{children:"Важно:"})," Размер экспорта не влияет на превью. Превью всегда оптимизировано для экрана устройства."]}),(0,a.jsxs)("div",{className:g().rangeGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:"\uD83D\uDCCF Размер экспорта (для скачивания)"}),(0,a.jsxs)("span",{className:g().rangeValue,children:[H.style.exportSize,"px"]})]}),(0,a.jsx)("input",{type:"range",className:g().rangeInput,min:p.EXPORT.MIN_SIZE,max:p.EXPORT.MAX_SIZE,step:p.EXPORT.STEP,value:H.style.exportSize,onChange:e=>ep(Number(e.target.value))}),(0,a.jsxs)("div",{className:g().rangeHint,children:["От ",p.EXPORT.MIN_SIZE,"px (веб) до ",p.EXPORT.MAX_SIZE,"px (печать, билборды)"]})]}),(0,a.jsxs)("div",{className:g().rangeGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:"\uD83D\uDEE1️ Уровень коррекции ошибок"}),(0,a.jsxs)("span",{className:g().rangeValue,children:["L"===H.style.errorCorrection&&"Низкий","M"===H.style.errorCorrection&&"Средний","Q"===H.style.errorCorrection&&"Высокий","H"===H.style.errorCorrection&&"Очень высокий"]})]}),(0,a.jsxs)("select",{className:g().select,value:H.style.errorCorrection,onChange:e=>ed({errorCorrection:e.target.value}),children:[(0,a.jsx)("option",{value:"L",children:"L — до 7%"}),(0,a.jsx)("option",{value:"M",children:"M — до 15%"}),(0,a.jsx)("option",{value:"Q",children:"Q — до 25%"}),(0,a.jsx)("option",{value:"H",children:"H — до 30%"})]}),(0,a.jsx)("div",{className:g().rangeHint,children:"Проценты показывают, какую часть QR-кода можно закрыть или испортить, чтобы он всё равно считывался."})]}),(0,a.jsxs)("div",{className:g().rangeGroup,children:[(0,a.jsxs)("label",{className:g().inputLabel,children:[(0,a.jsx)("span",{children:"\uD83D\uDDBC️ Отступ (Quiet Zone)"}),(0,a.jsxs)("span",{className:g().rangeValue,children:[H.style.marginPercent,"%"]})]}),(0,a.jsx)("input",{type:"range",className:g().rangeInput,min:p.MARGIN.MIN,max:p.MARGIN.MAX,step:p.MARGIN.STEP,value:H.style.marginPercent,onChange:e=>eu(Number(e.target.value)),onInput:e=>eu(Number(e.target.value))}),(0,a.jsxs)("div",{className:g().rangeControls,children:[(0,a.jsx)("button",{type:"button",className:g().rangeStepper,onClick:()=>eu(H.style.marginPercent-p.MARGIN.STEP),"aria-label":"Уменьшить отступ",children:"−"}),(0,a.jsx)("input",{type:"number",className:g().rangeNumber,min:p.MARGIN.MIN,max:p.MARGIN.MAX,step:p.MARGIN.STEP,value:H.style.marginPercent,onChange:e=>eu(Number(e.target.value))}),(0,a.jsx)("button",{type:"button",className:g().rangeStepper,onClick:()=>eu(H.style.marginPercent+p.MARGIN.STEP),"aria-label":"Увеличить отступ",children:"+"})]}),(0,a.jsx)("div",{className:g().rangeHint,children:"В процентах от размера QR. 8% = стандарт, 0% = без отступа."})]}),(0,a.jsx)("div",{className:g().divider}),(0,a.jsxs)("div",{className:g().infoCard,children:["⚠️ ",(0,a.jsx)("strong",{children:"Внимание:"})," Высокий уровень коррекции ошибок делает QR-код более устойчивым к повреждениям, но увеличивает его сложность"]}),(0,a.jsxs)("div",{className:g().inputGroup,children:[(0,a.jsx)("label",{className:g().inputLabel,children:(0,a.jsx)("span",{children:"\uD83D\uDCE6 Формат экспорта"})}),(0,a.jsxs)("select",{className:g().select,children:[(0,a.jsx)("option",{value:"png",children:"PNG (Рекомендуется)"}),(0,a.jsx)("option",{value:"svg",children:"SVG (Векторный)"})]})]})]}),(0,a.jsxs)("div",{className:g().actionButtons,children:[(0,a.jsx)("button",{className:o()(g().btn,g().btnSecondary),onClick:()=>{eA(),v("medium")},children:"\uD83D\uDC41️ Превью"}),(0,a.jsx)("button",{className:o()(g().btn,g().btnPrimary),onClick:()=>ek("png"),children:"⬇️ Скачать QR"})]}),ea&&(0,a.jsx)("div",{className:o()(g().loading,g().loadingActive),children:"⏳ Генерация QR-кода..."})]})}function w(){return(0,a.jsx)("div",{className:"skeleton",children:(0,a.jsx)("div",{className:"skeleton-pulse"})})}function R(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium";(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp)&&window.Telegram.WebApp.HapticFeedback.impactOccurred(t)}r(5683);let L=s()(()=>Promise.all([r.e(425),r.e(491),r.e(409)]).then(r.bind(r,4570)).then(e=>({default:e.BatchGenerator})),{loadableGenerated:{webpack:()=>[4570]},loading:()=>(0,a.jsx)(w,{}),ssr:!1}),M=s()(()=>Promise.all([r.e(735),r.e(996)]).then(r.bind(r,996)).then(e=>({default:e.Scanner})),{loadableGenerated:{webpack:()=>[996]},loading:()=>(0,a.jsx)(w,{}),ssr:!1});function T(){let[e,t]=(0,l.useState)("generator");return(0,a.jsxs)("main",{className:"page",children:[(0,a.jsxs)("div",{className:g().header,children:[(0,a.jsx)("h1",{className:g().headerTitle,children:"QR Suite"}),(0,a.jsx)("p",{className:g().headerSubtitle,children:"Генератор, пакетная сборка и сканер QR-кодов"})]}),(0,a.jsxs)("div",{className:g().tabs,children:[(0,a.jsx)("button",{className:o()(g().tab,{[g().tabActive]:"generator"===e}),onClick:()=>{t("generator"),R("light")},children:"\uD83C\uDFA8 Генератор"}),(0,a.jsx)("button",{className:o()(g().tab,{[g().tabActive]:"batch"===e}),onClick:()=>{t("batch"),R("light")},children:"\uD83D\uDCE6 Пакетная"}),(0,a.jsx)("button",{className:o()(g().tab,{[g().tabActive]:"scanner"===e}),onClick:()=>{t("scanner"),R("light")},children:"\uD83D\uDCF7 Сканер"})]}),"generator"===e&&(0,a.jsx)(P,{}),"batch"===e&&(0,a.jsx)(L,{}),"scanner"===e&&(0,a.jsx)(M,{}),(0,a.jsx)("footer",{className:"page__footer",children:(0,a.jsxs)("p",{children:["Черновики хранятся локально. Поддерживается CSV поле ",(0,a.jsx)("code",{children:"slug"})," для будущей миграции на динамические ссылки."]})})]})}},9785:function(e,t,r){"use strict";let a,l;r.d(t,{L:function(){return G}});var n,s=r(4090);let i=(e,t)=>t.some(t=>e instanceof t),o=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,p=new WeakMap,m={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return h(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,r)=>{let a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",n)},l=()=>{t(h(e.result)),a()},n=()=>{r(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",n)});return t.then(t=>{t instanceof IDBCursor&&o.set(t,e)}).catch(()=>{}),p.set(t,e),t}(e);if(u.has(e))return u.get(e);let r="function"==typeof(t=e)?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return t.apply(g(this),r),h(o.get(this))}:function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return h(t.apply(g(this),r))}:function(e){for(var r=arguments.length,a=Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];let n=t.call(g(this),e,...a);return d.set(n,e.sort?e.sort():[e]),h(n)}:(t instanceof IDBTransaction&&function(e){if(c.has(e))return;let t=new Promise((t,r)=>{let a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",n),e.removeEventListener("abort",n)},l=()=>{t(),a()},n=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",n),e.addEventListener("abort",n)});c.set(e,t)}(t),i(t,a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,m):t;return r!==e&&(u.set(e,r),p.set(r,e)),r}let g=e=>p.get(e),v=["get","getKey","getAll","getAllKeys","count"],f=["put","add","delete","clear"],y=new Map;function b(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(y.get(t))return y.get(t);let r=t.replace(/FromIndex$/,""),a=t!==r,l=f.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(l||v.includes(r)))return;let n=async function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];let i=this.transaction(e,l?"readwrite":"readonly"),o=i.store;return a&&(o=o.index(n.shift())),(await Promise.all([o[r](...n),l&&i.done]))[0]};return y.set(t,n),n}m={...n=m,get:(e,t,r)=>b(e,t)||n.get(e,t,r),has:(e,t)=>!!b(e,t)||n.has(e,t)};let x="drafts";async function N(){return function(e,t){let{blocked:r,upgrade:a,blocking:l,terminated:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=indexedDB.open(e,1),i=h(s);return a&&s.addEventListener("upgradeneeded",e=>{a(h(s.result),e.oldVersion,e.newVersion,h(s.transaction),e)}),r&&s.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),i.then(e=>{n&&e.addEventListener("close",()=>n()),l&&e.addEventListener("versionchange",e=>l(e.oldVersion,e.newVersion,e))}).catch(()=>{}),i}("qr-suite",1,{upgrade(e){e.objectStoreNames.contains(x)||e.createObjectStore(x)}})}async function j(e){var t;let r=await N();return null!==(t=await r.get(x,e))&&void 0!==t?t:null}async function _(e,t){let r=await N();await r.put(x,t,e)}async function C(e){let t=await N();await t.delete(x,e)}function G(e,t){let[r,a]=(0,s.useState)(t),[l,n]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let t=!0;return j(e).then(e=>{t&&e&&a(e),t&&n(!0)}),()=>{t=!1}},[e]),(0,s.useEffect)(()=>{l&&_(e,r).catch(e=>{console.warn("Не удалось сохранить черновик",e)})},[e,r,l]);let i=async()=>{a(t),await C(e)};return{value:r,setValue:a,hydrated:l,reset:i}}},4113:function(e,t,r){"use strict";r.d(t,{u:function(){return u},x:function(){return p}});let a=new Set(["WPA","WPA2","WEP","NOPASS"]),l=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})(?::(\d{2}))?(?:Z|[+-]\d{2}:\d{2})?$/,n=[{type:"url",title:"URL",description:"Автодобавление схемы и базовая валидация",fields:[{name:"url",label:"Ссылка",placeholder:"example.com/page",prefill:"https://example.com",required:!0,validate:e=>{let t=e.trim();if(!t)return"Укажите ссылку";let r=t.startsWith("http")?t:"https://".concat(t);try{if(!new URL(r).hostname.includes("."))return"Укажите корректный домен"}catch(e){return"Некорректный URL"}return null}}],buildPayload:e=>{var t,r;let a=null!==(r=null===(t=e.url)||void 0===t?void 0:t.trim())&&void 0!==r?r:"";return a?a.startsWith("http")?a:"https://".concat(a):""}},{type:"text",title:"Текст",description:"Любой UTF-8 текст",fields:[{name:"text",label:"Текст",type:"textarea",placeholder:"Введите текст",prefill:"Привет из QR Suite!",required:!0}],buildPayload:e=>{var t;return null!==(t=e.text)&&void 0!==t?t:""}},{type:"tel",title:"Телефон",description:"tap-to-call",fields:[{name:"phone",label:"Номер",placeholder:"+7 900 000-00-00",prefill:"+79991234567",required:!0,validate:e=>{let t=e.replace(/[^\d+]/g,"");return/^\+?[\d]{5,15}$/.test(t)?null:"Введите телефон в формате +79991234567"}}],buildPayload:e=>{var t,r;return"tel:".concat(null!==(r=null===(t=e.phone)||void 0===t?void 0:t.replace(/[^\d+]/g,""))&&void 0!==r?r:"")}},{type:"sms",title:"SMS",description:"SMSTO: номер и текст",fields:[{name:"phone",label:"Номер",required:!0,placeholder:"+79001234567",prefill:"+79991234567"},{name:"message",label:"Сообщение",type:"textarea",placeholder:"Текст SMS",prefill:"Привет! Это демо сообщение."}],buildPayload:e=>{var t,r,a;let l=null!==(r=null===(t=e.phone)||void 0===t?void 0:t.replace(/[^\d+]/g,""))&&void 0!==r?r:"",n=encodeURIComponent(null!==(a=e.message)&&void 0!==a?a:"");return"SMSTO:".concat(l,":").concat(n)}},{type:"mailto",title:"Email",description:"mailto: адрес, тема, тело",fields:[{name:"address",label:"Email",type:"email",required:!0,prefill:"hello@example.com"},{name:"subject",label:"Тема",prefill:"Встреча"},{name:"body",label:"Сообщение",type:"textarea",prefill:"Коллеги, давайте синхронизируемся завтра."}],buildPayload:e=>{var t;let r=new URLSearchParams;e.subject&&r.set("subject",e.subject),e.body&&r.set("body",e.body);let a=r.toString();return"mailto:".concat(null!==(t=e.address)&&void 0!==t?t:"").concat(a?"?".concat(a):"")}},{type:"geo",title:"Геометка",description:"Координаты lat,lng",fields:[{name:"lat",label:"Широта",required:!0,helper:"Напр. 59.9386",prefill:"59.9386",validate:e=>{if(!e.trim())return null;let t=Number(e.replace(",","."));return Number.isFinite(t)?t<-90||t>90?"Широта от -90 до 90":null:"Используйте числовое значение"}},{name:"lng",label:"Долгота",required:!0,helper:"Напр. 30.3141",prefill:"30.3141",validate:e=>{if(!e.trim())return null;let t=Number(e.replace(",","."));return Number.isFinite(t)?t<-180||t>180?"Долгота от -180 до 180":null:"Используйте числовое значение"}},{name:"label",label:"Описание",prefill:"Санкт-Петербург"}],buildPayload:e=>{let t=o(e.lat,90),r=o(e.lng,180);if(!t||!r)return"";let a=e.label?"?q=".concat(encodeURIComponent(e.label)):"";return"geo:".concat(t,",").concat(r).concat(a)}},{type:"wifi",title:"Wi-Fi",description:"SSID, тип, пароль",fields:[{name:"ssid",label:"SSID",required:!0,prefill:"OfficeWiFi"},{name:"auth",label:"Шифрование",placeholder:"WPA, WPA2, WEP или nopass",helper:"nopass для открытых сетей",prefill:"WPA2",validate:e=>{if(!e.trim())return null;let t=e.trim().toUpperCase();return a.has(t)?null:"Допустимо: WPA, WPA2, WEP или nopass"}},{name:"password",label:"Пароль",prefill:"SuperSecure123",validate:(e,t)=>"nopass"===s(t.auth)||e.trim()?null:"Пароль обязателен для выбранного шифрования"},{name:"hidden",label:"Скрытая сеть (true/false)",placeholder:"false",prefill:"false",validate:e=>e.trim()?/^(true|false)$/i.test(e.trim())?null:"Введите true или false":null}],buildPayload:e=>{var t,r,a;let l=null!==(r=e.ssid)&&void 0!==r?r:"",n=s(e.auth),o=null!==(a=e.password)&&void 0!==a?a:"",c="nopass"===n?"":";P:".concat(i(o)),d=(null===(t=e.hidden)||void 0===t?void 0:t.toLowerCase())==="true"?";H:true":"";return"WIFI:T:".concat(n,";S:").concat(i(l)).concat(c).concat(d,";;")}},{type:"vcard",title:"vCard",description:"Контакты vCard 3.0",fields:[{name:"firstName",label:"Имя",required:!0,prefill:"Иван"},{name:"lastName",label:"Фамилия",prefill:"Иванов"},{name:"organization",label:"Компания",prefill:"ООО \xabПример\xbb"},{name:"title",label:"Должность",prefill:"Менеджер"},{name:"phone",label:"Телефон",prefill:"+79991234567"},{name:"email",label:"Email",prefill:"ivan@example.com"},{name:"website",label:"Сайт",prefill:"https://example.com"},{name:"notes",label:"Заметки",type:"textarea",prefill:"Будьте на связи"}],buildPayload:e=>{var t,r;let a=["BEGIN:VCARD","VERSION:3.0","N:".concat(null!==(t=e.lastName)&&void 0!==t?t:"",";").concat(null!==(r=e.firstName)&&void 0!==r?r:"",";;;"),"FN:".concat([e.firstName,e.lastName].filter(Boolean).join(" "))];return e.organization&&a.push("ORG:".concat(e.organization)),e.title&&a.push("TITLE:".concat(e.title)),e.phone&&a.push("TEL;TYPE=CELL:".concat(e.phone)),e.email&&a.push("EMAIL;TYPE=INTERNET:".concat(e.email)),e.website&&a.push("URL:".concat(e.website)),e.notes&&a.push("NOTE:".concat(e.notes)),a.push("END:VCARD"),a.join("\n")}},{type:"mecard",title:"MeCard",description:"Компактный формат визитки",fields:[{name:"name",label:"Имя",required:!0,prefill:"Иван Иванов"},{name:"phone",label:"Телефон",prefill:"+79991234567"},{name:"email",label:"Email",prefill:"ivan@example.com"},{name:"address",label:"Адрес",type:"textarea",prefill:"Россия, Москва"},{name:"note",label:"Заметка",type:"textarea",prefill:"Добавьте меня в контакты"}],buildPayload:e=>{var t;let r=["MECARD:N:".concat(null!==(t=e.name)&&void 0!==t?t:"",";")];return e.phone&&r.push("TEL:".concat(e.phone,";")),e.email&&r.push("EMAIL:".concat(e.email,";")),e.address&&r.push("ADR:".concat(e.address,";")),e.note&&r.push("NOTE:".concat(e.note,";")),r.push(";"),r.join("")}},{type:"ics",title:"Событие ICS",description:"iCalendar (VEVENT)",fields:[{name:"summary",label:"Заголовок",required:!0,prefill:"Командный созвон"},{name:"description",label:"Описание",type:"textarea",prefill:"Повестка: результаты спринта"},{name:"location",label:"Место",prefill:"Офис, переговорная 1"},{name:"start",label:"Начало (ISO 8601)",placeholder:"2024-03-12T10:00",prefill:"2024-03-12T10:00",validate:e=>{let t=e.trim();return t?c(t)?null:"Используйте формат ISO 8601":null}},{name:"end",label:"Конец (ISO 8601)",placeholder:"2024-03-12T12:00",prefill:"2024-03-12T11:00",validate:(e,t)=>{var r;let a=e.trim();if(!a)return null;if(!c(a))return"Используйте формат ISO 8601";let l=null===(r=t.start)||void 0===r?void 0:r.trim();return l&&c(l)&&new Date(a)<=new Date(l)?"Окончание должно быть позже начала":null}}],buildPayload:e=>{let t=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT"];return e.summary&&t.push("SUMMARY:".concat(e.summary)),e.description&&t.push("DESCRIPTION:".concat(e.description)),e.location&&t.push("LOCATION:".concat(e.location)),e.start&&t.push("DTSTART:".concat(d(e.start))),e.end&&t.push("DTEND:".concat(d(e.end))),t.push("END:VEVENT","END:VCALENDAR"),t.join("\n")}}];function s(e){let t=(null!=e?e:"").trim().toUpperCase();return"NOPASS"===t?"nopass":a.has(t)?t:"WPA"}function i(e){return(null!=e?e:"").replace(/([\\;",:])/g,"\\$1")}function o(e,t){if(!e)return"";let r=Number(e.trim().replace(",","."));return!Number.isFinite(r)||Math.abs(r)>t?"":String(r)}function c(e){return!!(e&&l.test(e))&&!Number.isNaN(new Date(e).getTime())}function d(e){if(!c(e))return e;try{return new Date(e).toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}catch(t){return e}}let u=n;function p(e){return function(e){let t=n.find(t=>t.type===e);if(!t)throw Error("Unsupported QR type: ".concat(e));return t}(e)}},5683:function(){},1025:function(e){e.exports={generator:"Generator_generator__xrR39",fadeIn:"Generator_fadeIn__xe5_S",header:"Generator_header__qj88d",fadeInDown:"Generator_fadeInDown__ToshX",headerTitle:"Generator_headerTitle__AT_RQ",headerSubtitle:"Generator_headerSubtitle__8VXVN",qrPreview:"Generator_qrPreview__SlqXx",rotate:"Generator_rotate__p5DEn",qrCode:"Generator_qrCode___N8Ki",qrCanvas:"Generator_qrCanvas__aDR3O",tabs:"Generator_tabs__8wXbN",tab:"Generator_tab__rIPqd",tabActive:"Generator_tabActive___Qfje",tabContent:"Generator_tabContent__Cihrl",tabContentActive:"Generator_tabContentActive__FQkxW",inputGroup:"Generator_inputGroup__apT4_",fadeInUp:"Generator_fadeInUp__fwMKp",inputLabel:"Generator_inputLabel__NCmAF",badge:"Generator_badge__bAK0A",input:"Generator_input__2ss0E",textarea:"Generator_textarea__Jh4jD",select:"Generator_select__zRwcf",templateGrid:"Generator_templateGrid__t0nRE",templateCard:"Generator_templateCard__4BNFt",templateCardActive:"Generator_templateCardActive__mLkWk",templateName:"Generator_templateName__jnEPm",templateDesc:"Generator_templateDesc__UAang",infoCard:"Generator_infoCard__2WqHb",infoCardWarning:"Generator_infoCardWarning__Q3f_S",styleGrid:"Generator_styleGrid__s4p_T",styleOption:"Generator_styleOption__HxW5O",styleOptionActive:"Generator_styleOptionActive__q1y0T",stylePreview:"Generator_stylePreview__KLmVI",styleLabel:"Generator_styleLabel__wfNX7",colorPickerGroup:"Generator_colorPickerGroup__nZWxB",colorPicker:"Generator_colorPicker__M_lp4",fieldGrid:"Generator_fieldGrid__e_eIn",fieldControl:"Generator_fieldControl__rPVhC",fieldTitle:"Generator_fieldTitle__4H1Ue",colorPreview:"Generator_colorPreview__52kYy",colorInput:"Generator_colorInput__zjQKg",logoControls:"Generator_logoControls__hJ3Fo",logoButtons:"Generator_logoButtons__ne8cK",logoUploadButton:"Generator_logoUploadButton__uxebv",logoUploadInput:"Generator_logoUploadInput__AB08N",logoRemoveButton:"Generator_logoRemoveButton___FqR6",logoPreview:"Generator_logoPreview__To2cE",logoHint:"Generator_logoHint__blpNe",gradientSection:"Generator_gradientSection__kmSZw",gradientBlock:"Generator_gradientBlock__rOyur",gradientHeader:"Generator_gradientHeader___a08N",gradientName:"Generator_gradientName__CapZU",gradientColorGroup:"Generator_gradientColorGroup__H5R51",gradientColorItem:"Generator_gradientColorItem__Z8_hN",checkboxRow:"Generator_checkboxRow__Fqnuf",rangeGroup:"Generator_rangeGroup__DgG3F",rangeValue:"Generator_rangeValue__kqv90",rangeInput:"Generator_rangeInput__eCdq6",rangeControls:"Generator_rangeControls__znm2O",rangeStepper:"Generator_rangeStepper__HKzMU",rangeNumber:"Generator_rangeNumber___6Bxe",rangeHint:"Generator_rangeHint__oUdqV",divider:"Generator_divider__5dwXF",switch:"Generator_switch__sLtIY",switchInput:"Generator_switchInput__S7H2k",slider:"Generator_slider__AbCFh",actionButtons:"Generator_actionButtons__XgvBu",btn:"Generator_btn__1EZhm",btnPrimary:"Generator_btnPrimary__tR6_u",btnSecondary:"Generator_btnSecondary__p071t",loading:"Generator_loading__Uqzmm",loadingActive:"Generator_loadingActive__nqg4K"}},6480:function(e,t){"use strict";var r;!/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/function(){var a={}.hasOwnProperty;function l(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=n(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return l.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)a.call(e,r)&&e[r]&&(t=n(t,r));return t}(r)))}return e}function n(e,t){return t?e?e+" "+t:e+t:e}e.exports?(l.default=l,e.exports=l):void 0!==(r=(function(){return l}).apply(t,[]))&&(e.exports=r)}()}},function(e){e.O(0,[971,69,744],function(){return e(e.s=2019)}),_N_E=e.O()}]);