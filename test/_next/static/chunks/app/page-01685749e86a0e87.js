(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2019:function(e,t,r){Promise.resolve().then(r.bind(r,6785))},4930:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let a=r(6921);r(3827),r(4090);let n=a._(r(4795));function l(e,t){let r={loading:e=>{let{error:t,isLoading:r,pastDelay:a}=e;return null}};return"function"==typeof e&&(r.loader=e),(0,n.default)({...r,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9721:function(e,t,r){"use strict";function a(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}}),r(9775)},4795:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let a=r(3827),n=r(4090),l=r(9721);function o(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let s={loader:()=>Promise.resolve(o(()=>null)),loading:null,ssr:!0},i=function(e){let t={...s,...e},r=(0,n.lazy)(()=>t.loader().then(o)),i=t.loading;function c(e){let o=i?(0,a.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,s=t.ssr?(0,a.jsx)(r,{...e}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(n.Suspense,{fallback:o,children:s})}return c.displayName="LoadableComponent",c}},6785:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(3827),n=r(4090),l=r(4930),o=r.n(l),s=r(6480),i=r.n(s),c=r(4113),d=r(9785),u=r(1025),p=r.n(u);function m(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium";(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp)&&window.Telegram.WebApp.HapticFeedback.impactOccurred(t)}let f={size:512,errorCorrection:"H",foreground:"#000000",background:"#ffffff",margin:4,dotStyle:"rounded",eyeOuter:"square",eyeInner:"square",logoSize:18,shape:"square",useDotsGradient:!1,dotsGradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#0b1220"},{offset:1,color:"#4a5568"}]},useBackgroundGradient:!1,backgroundGradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#ffffff"},{offset:1,color:"#f7fafc"}]},useCornersGradient:!1,cornersGradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#0b1220"},{offset:1,color:"#4a5568"}]},hideBackgroundDots:!0};function h(e,t){return"".concat(e,".").concat(t)}let b=[{name:"Классический",emoji:"⚫",fg:"#000000",bg:"#ffffff"},{name:"Современный",emoji:"\uD83D\uDD35",fg:"#667eea",bg:"#f0f4ff"},{name:"Природа",emoji:"\uD83C\uDF3F",fg:"#2d5016",bg:"#f5f1e8"},{name:"Закат",emoji:"\uD83C\uDF05",fg:"#ff6b35",bg:"#ffe5d9"}],y=[{type:"url",emoji:"\uD83C\uDF10",name:"URL",desc:"Ссылка на сайт"},{type:"text",emoji:"\uD83D\uDCC4",name:"Текст",desc:"Произвольный текст"},{type:"tel",emoji:"\uD83D\uDCDE",name:"Телефон",desc:"Звонок"},{type:"sms",emoji:"\uD83D\uDCAC",name:"SMS",desc:"Сообщение"},{type:"mailto",emoji:"\uD83D\uDCE7",name:"Email",desc:"Почта"},{type:"geo",emoji:"\uD83D\uDCCD",name:"Геометка",desc:"Координаты"},{type:"wifi",emoji:"\uD83D\uDCF6",name:"Wi-Fi",desc:"Подключение"},{type:"vcard",emoji:"\uD83D\uDC64",name:"vCard",desc:"Визитка"},{type:"mecard",emoji:"\uD83D\uDCB3",name:"MeCard",desc:"Компакт визитка"},{type:"ics",emoji:"\uD83D\uDCC5",name:"Событие",desc:"Календарь"}],v=[{id:"square",emoji:"⬛",label:"Квадраты",dotStyle:"square"},{id:"dots",emoji:"⚫",label:"Точки",dotStyle:"dots"},{id:"rounded",emoji:"\uD83D\uDD18",label:"Скругленные",dotStyle:"rounded"},{id:"elegant",emoji:"\uD83D\uDC8E",label:"Элегантный",dotStyle:"extra-rounded"}];function g(){let{value:e,setValue:t,hydrated:l}=(0,d.L)("generator",{type:"url",formValues:{},style:f}),[o,s]=(0,n.useState)("content"),[u,g]=(0,n.useState)(""),[_,j]=(0,n.useState)({}),[x,D]=(0,n.useState)(0),[N,C]=(0,n.useState)(null),[G,S]=(0,n.useState)(!1),w=(0,n.useRef)(null),E=(0,n.useRef)(),k=(0,n.useMemo)(()=>(0,c.x)(e.type),[e.type]),I=(0,n.useCallback)(e=>{t(t=>({...t,style:{...t.style,...e}}))},[t]),A=(0,n.useCallback)((e,r)=>{t(t=>({...t,formValues:{...t.formValues,[h(t.type,e)]:r}}))},[t]),L=(0,n.useCallback)(e=>{m("light"),j({}),t(t=>({...t,type:e,formValues:t.formValues,style:t.style}))},[t]);(0,n.useEffect)(()=>{Promise.all([r.e(587),r.e(620)]).then(r.t.bind(r,5439,23)).then(e=>{C(()=>e.default)})},[]),(0,n.useEffect)(()=>{if(w.current&&N&&!E.current){let e=new N({width:f.size,height:f.size,data:"https://t.me/durov",image:void 0,qrOptions:{errorCorrectionLevel:f.errorCorrection,margin:f.margin,mode:"Byte"}});E.current=e,e.append(w.current)}},[N]);let P=(0,n.useMemo)(()=>{let t={};for(let a of k.fields){var r;let n=h(e.type,a.name);t[a.name]=null!==(r=e.formValues[n])&&void 0!==r?r:""}return t},[e.formValues,e.type,k.fields]),O=(0,n.useCallback)(()=>{var t;if(!E.current)return!1;let r=k.buildPayload(P),a=new TextEncoder().encode(r),n=a.length;D(n);let l={};if(k.fields.forEach(e=>{var t;let r=null!==(t=P[e.name])&&void 0!==t?t:"";if(e.required&&!r.trim()){l[e.name]="Обязательное поле";return}if(e.validate){let t=e.validate(r,P);t&&(l[e.name]=t)}e.pattern&&r&&!e.pattern.test(r)&&(l[e.name]="Некорректное значение")}),r||(l.__payload="Заполните обязательные поля"),n>2953&&(l.__payload="Предел ".concat(2953," байт, сейчас ").concat(n)),j(l),Object.keys(l).length>0)return m("light"),!1;m("medium"),g(r);let o={data:function(e){let t="";for(let r=0;r<e.length;r+=32768)t+=String.fromCharCode(...e.subarray(r,r+32768));return t}(a),width:e.style.size,height:e.style.size,image:e.style.logoDataUrl,shape:e.style.shape,qrOptions:{errorCorrectionLevel:e.style.errorCorrection,margin:e.style.margin,mode:"Byte"},dotsOptions:{...e.style.useDotsGradient&&e.style.dotsGradient?{gradient:e.style.dotsGradient}:{color:e.style.foreground},type:e.style.dotStyle},backgroundOptions:{...e.style.useBackgroundGradient&&e.style.backgroundGradient?{gradient:e.style.backgroundGradient}:{color:e.style.background}},cornersSquareOptions:{...e.style.useCornersGradient&&e.style.cornersGradient?{gradient:e.style.cornersGradient}:{color:e.style.foreground},type:e.style.eyeOuter},cornersDotOptions:{...e.style.useCornersGradient&&e.style.cornersGradient?{gradient:e.style.cornersGradient}:{color:e.style.foreground},type:e.style.eyeInner},imageOptions:{imageSize:e.style.logoSize/100,margin:4,hideBackgroundDots:e.style.hideBackgroundDots}};return null===(t=E.current)||void 0===t||t.update(o),!0},[k,P,e.style]);(0,n.useEffect)(()=>{E.current&&O()},[N,O]),(0,n.useEffect)(()=>{l&&E.current&&O()},[O,l]);let R=(0,n.useCallback)(async e=>{if(E.current&&O()){S(!0),m("heavy");try{let t=u||k.buildPayload(P),r=await E.current.getRawData(e);if(!r)return;let a=t.slice(0,32).replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"").toLowerCase()||"qr",n="".concat(a,".").concat(e),l="svg"===e?"image/svg+xml":"image/png",o=window.navigator;if(o&&"function"==typeof o.share&&"undefined"!=typeof File){let e="function"==typeof o.canShare,a=new File([r],n,{type:l});if(!e||o.canShare({files:[a]}))try{await o.share({files:[a],title:"QR код",text:t});return}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return}}let s=URL.createObjectURL(r);try{let e=document.createElement("a");e.href=s,e.download=n,document.body.appendChild(e),e.click(),document.body.removeChild(e)}finally{URL.revokeObjectURL(s)}}finally{S(!1)}}},[O,u,k,P]),T=e=>{let t=e.replace("#",""),r=parseInt(t.substr(0,2),16);return(299*r+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>128};return(0,a.jsxs)("section",{className:p().generator,children:[(0,a.jsx)("div",{className:p().qrPreview,children:(0,a.jsx)("div",{className:p().qrCode,children:(0,a.jsx)("div",{ref:w})})}),(0,a.jsxs)("div",{className:p().tabs,children:[(0,a.jsx)("button",{className:i()(p().tab,{[p().tabActive]:"content"===o}),onClick:()=>{s("content"),m("light")},children:"\uD83D\uDCDD Контент"}),(0,a.jsx)("button",{className:i()(p().tab,{[p().tabActive]:"style"===o}),onClick:()=>{s("style"),m("light")},children:"\uD83C\uDFA8 Стиль"}),(0,a.jsx)("button",{className:i()(p().tab,{[p().tabActive]:"advanced"===o}),onClick:()=>{s("advanced"),m("light")},children:"⚙️ Продвинутые"})]}),(0,a.jsxs)("div",{className:i()(p().tabContent,{[p().tabContentActive]:"content"===o}),children:[(0,a.jsxs)("div",{className:p().inputGroup,children:[(0,a.jsx)("label",{className:p().inputLabel,children:(0,a.jsx)("span",{children:"Выберите тип QR-кода"})}),(0,a.jsx)("div",{className:p().templateGrid,children:y.map(t=>(0,a.jsxs)("div",{className:i()(p().templateCard,{[p().templateCardActive]:e.type===t.type}),onClick:()=>L(t.type),children:[(0,a.jsxs)("div",{className:p().templateName,children:[t.emoji," ",t.name]}),(0,a.jsx)("div",{className:p().templateDesc,children:t.desc})]},t.type))})]}),(0,a.jsx)("div",{className:p().divider}),(0,a.jsxs)("div",{className:p().inputGroup,children:[(0,a.jsxs)("label",{className:p().inputLabel,children:[(0,a.jsx)("span",{children:k.title}),(0,a.jsx)("span",{className:p().badge,children:k.description})]}),k.fields.map(e=>{var t,r;return(0,a.jsxs)("div",{className:p().inputGroup,children:[(0,a.jsx)("label",{className:p().inputLabel,children:(0,a.jsxs)("span",{children:[e.label,e.required&&" *"]})}),"textarea"===e.type?(0,a.jsx)("textarea",{className:i()(p().textarea,{error:!!_[e.name]}),value:null!==(t=P[e.name])&&void 0!==t?t:"",onChange:t=>A(e.name,t.target.value),placeholder:e.placeholder}):(0,a.jsx)("input",{type:"email"===e.type?"email":"number"===e.type?"number":"text",className:i()(p().input,{error:!!_[e.name]}),value:null!==(r=P[e.name])&&void 0!==r?r:"",onChange:t=>A(e.name,t.target.value),placeholder:e.placeholder}),e.helper&&(0,a.jsx)("small",{style:{fontSize:"12px",opacity:.6,marginTop:"4px"},children:e.helper}),_[e.name]&&(0,a.jsx)("span",{className:"error-text",children:_[e.name]})]},e.name)}),_.__payload&&(0,a.jsx)("span",{className:"error-text",children:_.__payload})]}),(0,a.jsxs)("div",{className:p().infoCard,children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Совет:"})," Используйте короткие данные для лучшего сканирования QR-кода. Длина: ",x," / ",2953," байт"]})]}),(0,a.jsxs)("div",{className:i()(p().tabContent,{[p().tabContentActive]:"style"===o}),children:[(0,a.jsxs)("div",{className:p().inputGroup,children:[(0,a.jsx)("label",{className:p().inputLabel,children:(0,a.jsx)("span",{children:"\uD83C\uDFAD Стиль QR-кода"})}),(0,a.jsx)("div",{className:p().styleGrid,children:v.map(t=>(0,a.jsxs)("div",{className:i()(p().styleOption,{[p().styleOptionActive]:e.style.dotStyle===t.dotStyle}),onClick:()=>{I({dotStyle:t.dotStyle}),m("light")},children:[(0,a.jsx)("div",{className:p().stylePreview,children:t.emoji}),(0,a.jsx)("div",{className:p().styleLabel,children:t.label})]},t.id))})]}),(0,a.jsx)("div",{className:p().divider}),(0,a.jsxs)("div",{className:p().inputGroup,children:[(0,a.jsx)("label",{className:p().inputLabel,children:(0,a.jsx)("span",{children:"\uD83C\uDFA8 Цветовая схема"})}),(0,a.jsxs)("div",{className:p().colorPickerGroup,children:[(0,a.jsxs)("div",{className:p().colorPicker,children:[(0,a.jsx)("label",{className:p().inputLabel,style:{marginBottom:"8px"},children:"Передний план"}),(0,a.jsx)("div",{className:p().colorPreview,style:{background:e.style.foreground,color:T(e.style.foreground)?"#000":"#fff"},children:e.style.foreground.toUpperCase()}),(0,a.jsx)("input",{type:"color",className:p().colorInput,value:e.style.foreground,onChange:e=>I({foreground:e.target.value})})]}),(0,a.jsxs)("div",{className:p().colorPicker,children:[(0,a.jsx)("label",{className:p().inputLabel,style:{marginBottom:"8px"},children:"Фон"}),(0,a.jsx)("div",{className:p().colorPreview,style:{background:e.style.background,color:T(e.style.background)?"#000":"#fff"},children:e.style.background.toUpperCase()}),(0,a.jsx)("input",{type:"color",className:p().colorInput,value:e.style.background,onChange:e=>I({background:e.target.value})})]})]})]}),(0,a.jsx)("div",{className:p().divider}),(0,a.jsx)("div",{className:p().templateGrid,children:b.map(e=>(0,a.jsxs)("div",{className:p().templateCard,onClick:()=>{I({foreground:e.fg,background:e.bg}),m("medium")},children:[(0,a.jsxs)("div",{className:p().templateName,children:[e.emoji," ",e.name]}),(0,a.jsxs)("div",{className:p().templateDesc,children:[e.fg," / ",e.bg]})]},e.name))})]}),(0,a.jsxs)("div",{className:i()(p().tabContent,{[p().tabContentActive]:"advanced"===o}),children:[(0,a.jsxs)("div",{className:p().rangeGroup,children:[(0,a.jsxs)("label",{className:p().inputLabel,children:[(0,a.jsx)("span",{children:"\uD83D\uDCCF Размер QR-кода"}),(0,a.jsxs)("span",{className:p().rangeValue,children:[e.style.size,"px"]})]}),(0,a.jsx)("input",{type:"range",className:p().rangeInput,min:256,max:2048,step:64,value:e.style.size,onChange:e=>I({size:Number(e.target.value)})})]}),(0,a.jsxs)("div",{className:p().rangeGroup,children:[(0,a.jsxs)("label",{className:p().inputLabel,children:[(0,a.jsx)("span",{children:"\uD83D\uDEE1️ Уровень коррекции ошибок"}),(0,a.jsxs)("span",{className:p().rangeValue,children:["L"===e.style.errorCorrection&&"Низкий","M"===e.style.errorCorrection&&"Средний","Q"===e.style.errorCorrection&&"Высокий","H"===e.style.errorCorrection&&"Очень высокий"]})]}),(0,a.jsxs)("select",{className:p().select,value:e.style.errorCorrection,onChange:e=>I({errorCorrection:e.target.value}),children:[(0,a.jsx)("option",{value:"L",children:"L — до 7%"}),(0,a.jsx)("option",{value:"M",children:"M — до 15%"}),(0,a.jsx)("option",{value:"Q",children:"Q — до 25%"}),(0,a.jsx)("option",{value:"H",children:"H — до 30%"})]})]}),(0,a.jsxs)("div",{className:p().rangeGroup,children:[(0,a.jsxs)("label",{className:p().inputLabel,children:[(0,a.jsx)("span",{children:"\uD83D\uDDBC️ Отступ"}),(0,a.jsx)("span",{className:p().rangeValue,children:e.style.margin})]}),(0,a.jsx)("input",{type:"range",className:p().rangeInput,min:0,max:10,value:e.style.margin,onChange:e=>I({margin:Number(e.target.value)})})]}),(0,a.jsx)("div",{className:p().divider}),(0,a.jsxs)("div",{className:p().infoCard,children:["⚠️ ",(0,a.jsx)("strong",{children:"Внимание:"})," Высокий уровень коррекции ошибок делает QR-код более устойчивым к повреждениям, но увеличивает его сложность"]}),(0,a.jsxs)("div",{className:p().inputGroup,children:[(0,a.jsx)("label",{className:p().inputLabel,children:(0,a.jsx)("span",{children:"\uD83D\uDCE6 Формат экспорта"})}),(0,a.jsxs)("select",{className:p().select,children:[(0,a.jsx)("option",{value:"png",children:"PNG (Рекомендуется)"}),(0,a.jsx)("option",{value:"svg",children:"SVG (Векторный)"})]})]})]}),(0,a.jsxs)("div",{className:p().actionButtons,children:[(0,a.jsx)("button",{className:i()(p().btn,p().btnSecondary),onClick:()=>{O(),m("medium")},children:"\uD83D\uDC41️ Превью"}),(0,a.jsx)("button",{className:i()(p().btn,p().btnPrimary),onClick:()=>R("png"),children:"⬇️ Скачать QR"})]}),G&&(0,a.jsx)("div",{className:i()(p().loading,p().loadingActive),children:"⏳ Генерация QR-кода..."})]})}function _(){return(0,a.jsx)("div",{className:"skeleton",children:(0,a.jsx)("div",{className:"skeleton-pulse"})})}function j(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium";(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp)&&window.Telegram.WebApp.HapticFeedback.impactOccurred(t)}r(5683);let x=o()(()=>Promise.all([r.e(425),r.e(491),r.e(409)]).then(r.bind(r,4570)).then(e=>({default:e.BatchGenerator})),{loadableGenerated:{webpack:()=>[4570]},loading:()=>(0,a.jsx)(_,{}),ssr:!1}),D=o()(()=>Promise.all([r.e(735),r.e(996)]).then(r.bind(r,996)).then(e=>({default:e.Scanner})),{loadableGenerated:{webpack:()=>[996]},loading:()=>(0,a.jsx)(_,{}),ssr:!1});function N(){let[e,t]=(0,n.useState)("generator");return(0,a.jsxs)("main",{className:"page",children:[(0,a.jsxs)("div",{className:p().header,children:[(0,a.jsx)("h1",{className:p().headerTitle,children:"QR Suite"}),(0,a.jsx)("p",{className:p().headerSubtitle,children:"Генератор, пакетная сборка и сканер QR-кодов"})]}),(0,a.jsxs)("div",{className:p().tabs,children:[(0,a.jsx)("button",{className:i()(p().tab,{[p().tabActive]:"generator"===e}),onClick:()=>{t("generator"),j("light")},children:"\uD83C\uDFA8 Генератор"}),(0,a.jsx)("button",{className:i()(p().tab,{[p().tabActive]:"batch"===e}),onClick:()=>{t("batch"),j("light")},children:"\uD83D\uDCE6 Пакетная"}),(0,a.jsx)("button",{className:i()(p().tab,{[p().tabActive]:"scanner"===e}),onClick:()=>{t("scanner"),j("light")},children:"\uD83D\uDCF7 Сканер"})]}),"generator"===e&&(0,a.jsx)(g,{}),"batch"===e&&(0,a.jsx)(x,{}),"scanner"===e&&(0,a.jsx)(D,{}),(0,a.jsx)("footer",{className:"page__footer",children:(0,a.jsxs)("p",{children:["Черновики хранятся локально. Поддерживается CSV поле ",(0,a.jsx)("code",{children:"slug"})," для будущей миграции на динамические ссылки."]})})]})}},9785:function(e,t,r){"use strict";let a,n;r.d(t,{L:function(){return C}});var l,o=r(4090);let s=(e,t)=>t.some(t=>e instanceof t),i=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,p=new WeakMap,m={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||d.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return f(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,r)=>{let a=()=>{e.removeEventListener("success",n),e.removeEventListener("error",l)},n=()=>{t(f(e.result)),a()},l=()=>{r(e.error),a()};e.addEventListener("success",n),e.addEventListener("error",l)});return t.then(t=>{t instanceof IDBCursor&&i.set(t,e)}).catch(()=>{}),p.set(t,e),t}(e);if(u.has(e))return u.get(e);let r="function"==typeof(t=e)?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return t.apply(h(this),r),f(i.get(this))}:function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return f(t.apply(h(this),r))}:function(e){for(var r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];let l=t.call(h(this),e,...a);return d.set(l,e.sort?e.sort():[e]),f(l)}:(t instanceof IDBTransaction&&function(e){if(c.has(e))return;let t=new Promise((t,r)=>{let a=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",l),e.removeEventListener("abort",l)},n=()=>{t(),a()},l=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",n),e.addEventListener("error",l),e.addEventListener("abort",l)});c.set(e,t)}(t),s(t,a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,m):t;return r!==e&&(u.set(e,r),p.set(r,e)),r}let h=e=>p.get(e),b=["get","getKey","getAll","getAllKeys","count"],y=["put","add","delete","clear"],v=new Map;function g(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(v.get(t))return v.get(t);let r=t.replace(/FromIndex$/,""),a=t!==r,n=y.includes(r);if(!(r in(a?IDBIndex:IDBObjectStore).prototype)||!(n||b.includes(r)))return;let l=async function(e){for(var t=arguments.length,l=Array(t>1?t-1:0),o=1;o<t;o++)l[o-1]=arguments[o];let s=this.transaction(e,n?"readwrite":"readonly"),i=s.store;return a&&(i=i.index(l.shift())),(await Promise.all([i[r](...l),n&&s.done]))[0]};return v.set(t,l),l}m={...l=m,get:(e,t,r)=>g(e,t)||l.get(e,t,r),has:(e,t)=>!!g(e,t)||l.has(e,t)};let _="drafts";async function j(){return function(e,t){let{blocked:r,upgrade:a,blocking:n,terminated:l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=indexedDB.open(e,1),s=f(o);return a&&o.addEventListener("upgradeneeded",e=>{a(f(o.result),e.oldVersion,e.newVersion,f(o.transaction),e)}),r&&o.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),s.then(e=>{l&&e.addEventListener("close",()=>l()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("qr-suite",1,{upgrade(e){e.objectStoreNames.contains(_)||e.createObjectStore(_)}})}async function x(e){var t;let r=await j();return null!==(t=await r.get(_,e))&&void 0!==t?t:null}async function D(e,t){let r=await j();await r.put(_,t,e)}async function N(e){let t=await j();await t.delete(_,e)}function C(e,t){let[r,a]=(0,o.useState)(t),[n,l]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let t=!0;return x(e).then(e=>{t&&e&&a(e),t&&l(!0)}),()=>{t=!1}},[e]),(0,o.useEffect)(()=>{n&&D(e,r).catch(e=>{console.warn("Не удалось сохранить черновик",e)})},[e,r,n]);let s=async()=>{a(t),await N(e)};return{value:r,setValue:a,hydrated:n,reset:s}}},4113:function(e,t,r){"use strict";r.d(t,{u:function(){return o},x:function(){return s}});let a=[{type:"url",title:"URL",description:"Автодобавление схемы и базовая валидация",fields:[{name:"url",label:"Ссылка",placeholder:"example.com/page",required:!0,validate:e=>{let t=e.trim();if(!t)return"Укажите ссылку";let r=t.startsWith("http")?t:"https://".concat(t);try{if(!new URL(r).hostname.includes("."))return"Укажите корректный домен"}catch(e){return"Некорректный URL"}return null}}],buildPayload:e=>{var t,r;let a=null!==(r=null===(t=e.url)||void 0===t?void 0:t.trim())&&void 0!==r?r:"";return a?a.startsWith("http")?a:"https://".concat(a):""}},{type:"text",title:"Текст",description:"Любой UTF-8 текст",fields:[{name:"text",label:"Текст",type:"textarea",placeholder:"Введите текст",required:!0}],buildPayload:e=>{var t;return null!==(t=e.text)&&void 0!==t?t:""}},{type:"tel",title:"Телефон",description:"tap-to-call",fields:[{name:"phone",label:"Номер",placeholder:"+7 900 000-00-00",required:!0,validate:e=>{let t=e.replace(/[^\d+]/g,"");return/^\+?[\d]{5,15}$/.test(t)?null:"Введите телефон в формате +79991234567"}}],buildPayload:e=>{var t,r;return"tel:".concat(null!==(r=null===(t=e.phone)||void 0===t?void 0:t.replace(/[^\d+]/g,""))&&void 0!==r?r:"")}},{type:"sms",title:"SMS",description:"sms: номер и текст",fields:[{name:"phone",label:"Номер",required:!0,placeholder:"+79001234567"},{name:"message",label:"Сообщение",type:"textarea",placeholder:"Текст SMS",required:!0}],buildPayload:e=>{var t,r,a,n;let l=null!==(a=null===(t=e.phone)||void 0===t?void 0:t.replace(/[^\d+]/g,""))&&void 0!==a?a:"",o=null!==(n=null===(r=e.message)||void 0===r?void 0:r.trim())&&void 0!==n?n:"";return l&&o?"sms:".concat(l,"?body=").concat(encodeURIComponent(o)):""}},{type:"mailto",title:"Email",description:"mailto: адрес, тема, тело",fields:[{name:"address",label:"Email",type:"email",required:!0},{name:"subject",label:"Тема"},{name:"body",label:"Сообщение",type:"textarea"}],buildPayload:e=>{var t;let r=new URLSearchParams;e.subject&&r.set("subject",e.subject),e.body&&r.set("body",e.body);let a=r.toString();return"mailto:".concat(null!==(t=e.address)&&void 0!==t?t:"").concat(a?"?".concat(a):"")}},{type:"geo",title:"Геометка",description:"Координаты lat,lng",fields:[{name:"lat",label:"Широта",required:!0,helper:"Напр. 59.9386"},{name:"lng",label:"Долгота",required:!0,helper:"Напр. 30.3141"},{name:"label",label:"Описание"}],buildPayload:e=>{var t,r;let a=null===(t=e.lat)||void 0===t?void 0:t.trim(),n=null===(r=e.lng)||void 0===r?void 0:r.trim();if(!a||!n)return"";let l=e.label?"?q=".concat(encodeURIComponent(e.label)):"";return"geo:".concat(a,",").concat(n).concat(l)}},{type:"wifi",title:"Wi-Fi",description:"SSID, тип, пароль",fields:[{name:"ssid",label:"SSID",required:!0},{name:"auth",label:"Шифрование",placeholder:"WPA, WPA2, WEP или nopass",helper:"nopass для открытых сетей"},{name:"password",label:"Пароль"},{name:"hidden",label:"Скрытая сеть (true/false)",placeholder:"false"}],buildPayload:e=>{var t,r,a,l;let o=null!==(a=e.ssid)&&void 0!==a?a:"",s=(null===(t=e.auth)||void 0===t?void 0:t.toUpperCase())||"WPA",i=null!==(l=e.password)&&void 0!==l?l:"",c=(null===(r=e.hidden)||void 0===r?void 0:r.toLowerCase())==="true"?";H:true":"";return"WIFI:T:".concat(s,";S:").concat(n(o),";P:").concat(n(i)).concat(c,";;")}},{type:"vcard",title:"vCard",description:"Контакты vCard 3.0",fields:[{name:"firstName",label:"Имя",required:!0},{name:"lastName",label:"Фамилия"},{name:"organization",label:"Компания"},{name:"title",label:"Должность"},{name:"phone",label:"Телефон"},{name:"email",label:"Email"},{name:"website",label:"Сайт"},{name:"notes",label:"Заметки",type:"textarea"}],buildPayload:e=>{var t,r;let a=["BEGIN:VCARD","VERSION:3.0","N:".concat(null!==(t=e.lastName)&&void 0!==t?t:"",";").concat(null!==(r=e.firstName)&&void 0!==r?r:"",";;;"),"FN:".concat([e.firstName,e.lastName].filter(Boolean).join(" "))];return e.organization&&a.push("ORG:".concat(e.organization)),e.title&&a.push("TITLE:".concat(e.title)),e.phone&&a.push("TEL;TYPE=CELL:".concat(e.phone)),e.email&&a.push("EMAIL;TYPE=INTERNET:".concat(e.email)),e.website&&a.push("URL:".concat(e.website)),e.notes&&a.push("NOTE:".concat(e.notes)),a.push("END:VCARD"),a.join("\n")}},{type:"mecard",title:"MeCard",description:"Компактный формат визитки",fields:[{name:"name",label:"Имя",required:!0},{name:"phone",label:"Телефон"},{name:"email",label:"Email"},{name:"address",label:"Адрес",type:"textarea"},{name:"note",label:"Заметка",type:"textarea"}],buildPayload:e=>{var t;let r=["MECARD:N:".concat(null!==(t=e.name)&&void 0!==t?t:"",";")];return e.phone&&r.push("TEL:".concat(e.phone,";")),e.email&&r.push("EMAIL:".concat(e.email,";")),e.address&&r.push("ADR:".concat(e.address,";")),e.note&&r.push("NOTE:".concat(e.note,";")),r.push(";"),r.join("")}},{type:"ics",title:"Событие ICS",description:"iCalendar (VEVENT)",fields:[{name:"summary",label:"Заголовок",required:!0},{name:"description",label:"Описание",type:"textarea"},{name:"location",label:"Место"},{name:"start",label:"Начало (ISO 8601)",placeholder:"2024-03-12T10:00"},{name:"end",label:"Конец (ISO 8601)",placeholder:"2024-03-12T12:00"}],buildPayload:e=>{let t=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT"];return e.summary&&t.push("SUMMARY:".concat(e.summary)),e.description&&t.push("DESCRIPTION:".concat(e.description)),e.location&&t.push("LOCATION:".concat(e.location)),e.start&&t.push("DTSTART:".concat(l(e.start))),e.end&&t.push("DTEND:".concat(l(e.end))),t.push("END:VEVENT","END:VCALENDAR"),t.join("\n")}}];function n(e){return e.replace(/([\\;",:])/g,"\\$1")}function l(e){try{let t=new Date(e);if(Number.isNaN(t.getTime()))return e;return t.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}catch(t){return e}}let o=a;function s(e){return function(e){let t=a.find(t=>t.type===e);if(!t)throw Error("Unsupported QR type: ".concat(e));return t}(e)}},5683:function(){},1025:function(e){e.exports={generator:"Generator_generator__xrR39",fadeIn:"Generator_fadeIn__xe5_S",header:"Generator_header__qj88d",fadeInDown:"Generator_fadeInDown__ToshX",headerTitle:"Generator_headerTitle__AT_RQ",headerSubtitle:"Generator_headerSubtitle__8VXVN",qrPreview:"Generator_qrPreview__SlqXx",rotate:"Generator_rotate__p5DEn",qrCode:"Generator_qrCode___N8Ki",tabs:"Generator_tabs__8wXbN",tab:"Generator_tab__rIPqd",tabActive:"Generator_tabActive___Qfje",tabContent:"Generator_tabContent__Cihrl",tabContentActive:"Generator_tabContentActive__FQkxW",inputGroup:"Generator_inputGroup__apT4_",fadeInUp:"Generator_fadeInUp__fwMKp",inputLabel:"Generator_inputLabel__NCmAF",badge:"Generator_badge__bAK0A",input:"Generator_input__2ss0E",textarea:"Generator_textarea__Jh4jD",select:"Generator_select__zRwcf",templateGrid:"Generator_templateGrid__t0nRE",templateCard:"Generator_templateCard__4BNFt",templateCardActive:"Generator_templateCardActive__mLkWk",templateName:"Generator_templateName__jnEPm",templateDesc:"Generator_templateDesc__UAang",infoCard:"Generator_infoCard__2WqHb",styleGrid:"Generator_styleGrid__s4p_T",styleOption:"Generator_styleOption__HxW5O",styleOptionActive:"Generator_styleOptionActive__q1y0T",stylePreview:"Generator_stylePreview__KLmVI",styleLabel:"Generator_styleLabel__wfNX7",colorPickerGroup:"Generator_colorPickerGroup__nZWxB",colorPicker:"Generator_colorPicker__M_lp4",colorPreview:"Generator_colorPreview__52kYy",colorInput:"Generator_colorInput__zjQKg",rangeGroup:"Generator_rangeGroup__DgG3F",rangeValue:"Generator_rangeValue__kqv90",rangeInput:"Generator_rangeInput__eCdq6",divider:"Generator_divider__5dwXF",switch:"Generator_switch__sLtIY",switchInput:"Generator_switchInput__S7H2k",slider:"Generator_slider__AbCFh",actionButtons:"Generator_actionButtons__XgvBu",btn:"Generator_btn__1EZhm",btnPrimary:"Generator_btnPrimary__tR6_u",btnSecondary:"Generator_btnSecondary__p071t",loading:"Generator_loading__Uqzmm",loadingActive:"Generator_loadingActive__nqg4K"}},6480:function(e,t){"use strict";var r;!/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/function(){var a={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=l(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)a.call(e,r)&&e[r]&&(t=l(t,r));return t}(r)))}return e}function l(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):void 0!==(r=(function(){return n}).apply(t,[]))&&(e.exports=r)}()}},function(e){e.O(0,[971,69,744],function(){return e(e.s=2019)}),_N_E=e.O()}]);