(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2019:function(e,t,n){Promise.resolve().then(n.bind(n,2715))},4930:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let l=n(6921);n(3827),n(4090);let a=l._(n(4795));function r(e,t){let n={loading:e=>{let{error:t,isLoading:n,pastDelay:l}=e;return null}};return"function"==typeof e&&(n.loader=e),(0,a.default)({...n,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},9721:function(e,t,n){"use strict";function l(e){let{reason:t,children:n}=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}}),n(9775)},4795:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let l=n(3827),a=n(4090),r=n(9721);function s(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let o={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},i=function(e){let t={...o,...e},n=(0,a.lazy)(()=>t.loader().then(s)),i=t.loading;function d(e){let s=i?(0,l.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,o=t.ssr?(0,l.jsx)(n,{...e}):(0,l.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,l.jsx)(n,{...e})});return(0,l.jsx)(a.Suspense,{fallback:s,children:o})}return d.displayName="LoadableComponent",d}},2715:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var l=n(3827),a=n(4930),r=n.n(a),s=n(4090),o=n(6480),i=n.n(o),d=n(4113),c=n(9785);function u(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"medium";(null===(e=window.Telegram)||void 0===e?void 0:e.WebApp)&&window.Telegram.WebApp.HapticFeedback.impactOccurred(t)}let p={size:320,errorCorrection:"H",foreground:"#0b1220",background:"#ffffff",margin:12,dotStyle:"rounded",eyeOuter:"square",eyeInner:"square",logoSize:18,shape:"square",useDotsGradient:!1,dotsGradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#0b1220"},{offset:1,color:"#4a5568"}]},useBackgroundGradient:!1,backgroundGradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#ffffff"},{offset:1,color:"#f7fafc"}]},useCornersGradient:!1,cornersGradient:{type:"linear",rotation:0,colorStops:[{offset:0,color:"#0b1220"},{offset:1,color:"#4a5568"}]},hideBackgroundDots:!0};function h(e,t){return"".concat(e,".").concat(t)}function y(){var e,t,a,r,o,y;let{value:m,setValue:f,hydrated:g}=(0,c.L)("generator",{type:"url",formValues:{},style:p}),[x,v]=(0,s.useState)(""),[j,b]=(0,s.useState)({}),[G,_]=(0,s.useState)(0),[N,S]=(0,s.useState)(null),C=(0,s.useRef)(null),k=(0,s.useRef)(),E=(0,s.useMemo)(()=>(0,d.x)(m.type),[m.type]),D=(0,s.useCallback)(e=>{f(t=>({...t,style:{...t.style,...e}}))},[f]),w=(0,s.useCallback)((e,t)=>{f(n=>({...n,formValues:{...n.formValues,[h(n.type,e)]:t}}))},[f]),I=(0,s.useCallback)(e=>{u("light"),b({}),f(t=>({...t,type:e,formValues:t.formValues,style:t.style}))},[f]);(0,s.useEffect)(()=>{Promise.all([n.e(587),n.e(620)]).then(n.t.bind(n,5439,23)).then(e=>{S(()=>e.default)})},[]),(0,s.useEffect)(()=>{if(C.current&&N&&!k.current){let e=new N({width:p.size,height:p.size,data:"https://example.com",image:void 0,qrOptions:{errorCorrectionLevel:p.errorCorrection,margin:p.margin,mode:"Byte"}});k.current=e,e.append(C.current)}},[N]);let O=(0,s.useMemo)(()=>{let e={};for(let n of E.fields){var t;let l=h(m.type,n.name);e[n.name]=null!==(t=m.formValues[l])&&void 0!==t?t:""}return e},[m.formValues,m.type,E.fields]),L=(0,s.useCallback)(()=>{var e;if(!k.current)return!1;let t=E.buildPayload(O),n=new TextEncoder().encode(t).length;_(n);let l={};if(E.fields.forEach(e=>{var t;let n=null!==(t=O[e.name])&&void 0!==t?t:"";if(e.required&&!n.trim()){l[e.name]="Обязательное поле";return}if(e.validate){let t=e.validate(n,O);t&&(l[e.name]=t)}e.pattern&&n&&!e.pattern.test(n)&&(l[e.name]="Некорректное значение")}),t||(l.__payload="Заполните обязательные поля"),n>2953&&(l.__payload="Предел ".concat(2953," байт, сейчас ").concat(n)),b(l),Object.keys(l).length>0)return u("light"),!1;u("medium"),v(t),"dots"===m.style.dotStyle||"classy-rounded"===m.style.dotStyle||m.style.eyeOuter,m.style.useDotsGradient&&m.style.dotsGradient&&(m.style.dotsGradient.type,m.style.dotsGradient.rotation,m.style.dotsGradient.colorStops);let a={data:t,width:m.style.size,height:m.style.size,image:m.style.logoDataUrl,shape:m.style.shape,qrOptions:{errorCorrectionLevel:m.style.errorCorrection,margin:m.style.margin,mode:"Byte"},dotsOptions:{...m.style.useDotsGradient&&m.style.dotsGradient?{gradient:m.style.dotsGradient}:{color:m.style.foreground},type:m.style.dotStyle},backgroundOptions:{...m.style.useBackgroundGradient&&m.style.backgroundGradient?{gradient:m.style.backgroundGradient}:{color:m.style.background}},cornersSquareOptions:{...m.style.useCornersGradient&&m.style.cornersGradient?{gradient:m.style.cornersGradient}:{color:m.style.foreground},type:m.style.eyeOuter},cornersDotOptions:{...m.style.useCornersGradient&&m.style.cornersGradient?{gradient:m.style.cornersGradient}:{color:m.style.foreground},type:m.style.eyeInner},imageOptions:{imageSize:m.style.logoSize/100,margin:4,hideBackgroundDots:m.style.hideBackgroundDots}};return null===(e=k.current)||void 0===e||e.update(a),!0},[E,O,m.style]);(0,s.useEffect)(()=>{k.current&&L()},[N,L]),(0,s.useEffect)(()=>{g&&k.current&&L()},[L,g]);let P=(0,s.useCallback)(e=>{if(!e){D({logoDataUrl:void 0});return}if(!e.type.startsWith("image/"))return;let t=new FileReader;t.onload=()=>{D({logoDataUrl:t.result})},t.readAsDataURL(e)},[D]),R=(0,s.useCallback)(async e=>{if(!k.current||!L())return;u("heavy");let t=x||E.buildPayload(O),n=await k.current.getRawData(e);if(!n)return;let l=URL.createObjectURL(n),a=document.createElement("a"),r=t.slice(0,32).replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"").toLowerCase()||"qr";a.href=l,a.download="".concat(r,".").concat(e),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(l)},[L,x,j]);return(0,l.jsxs)("section",{className:"card",children:[(0,l.jsxs)("header",{className:"card__header",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{children:"Этап A. Генерация QR"}),(0,l.jsx)("p",{children:"Статические QR-коды всех типов с настройкой дизайна."})]}),(0,l.jsx)("span",{className:"badge",children:"Автосохранение в браузере"})]}),(0,l.jsx)("div",{className:"type-grid",children:d.u.map(e=>(0,l.jsxs)("button",{className:i()("pill",{pill__active:e.type===m.type}),onClick:()=>I(e.type),children:[(0,l.jsx)("strong",{children:e.title}),(0,l.jsx)("span",{children:e.description})]},e.type))}),(0,l.jsxs)("div",{className:"grid",children:[(0,l.jsxs)("div",{className:"grid__column",children:[(0,l.jsx)("h2",{children:"Данные"}),(0,l.jsxs)("form",{className:"form",onSubmit:e=>{e.preventDefault(),L()},children:[E.fields.map(e=>{var t,n;return(0,l.jsxs)("label",{className:"form__field",children:[(0,l.jsx)("span",{children:e.label}),"textarea"===e.type?(0,l.jsx)("textarea",{value:null!==(t=O[e.name])&&void 0!==t?t:"",onChange:t=>w(e.name,t.target.value),placeholder:e.placeholder,className:i()({error:!!j[e.name]})}):(0,l.jsx)("input",{type:"email"===e.type?"email":"text",value:null!==(n=O[e.name])&&void 0!==n?n:"",onChange:t=>w(e.name,t.target.value),placeholder:e.placeholder,className:i()({error:!!j[e.name]})}),e.helper?(0,l.jsx)("small",{children:e.helper}):null,j[e.name]?(0,l.jsx)("span",{className:"error-text",children:j[e.name]}):null]},e.name)}),(0,l.jsxs)("div",{className:"form__foot",children:[(0,l.jsxs)("span",{children:["Длина: ",G," байт из ",2953]}),j.__payload?(0,l.jsx)("span",{className:"error-text",children:j.__payload}):null]}),(0,l.jsx)("button",{type:"submit",className:"primary",children:"Собрать QR"})]})]}),(0,l.jsxs)("div",{className:"grid__column",children:[(0,l.jsx)("h2",{children:"Настройки стиля"}),(0,l.jsxs)("div",{className:"panel",children:[(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Размер, px"}),(0,l.jsx)("input",{type:"range",min:240,max:520,value:m.style.size,onChange:e=>D({size:Number(e.target.value)})}),(0,l.jsx)("strong",{children:m.style.size})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Коррекция ошибок"}),(0,l.jsxs)("select",{value:m.style.errorCorrection,onChange:e=>D({errorCorrection:e.target.value}),children:[(0,l.jsx)("option",{value:"L",children:"L — до 7%"}),(0,l.jsx)("option",{value:"M",children:"M — до 15%"}),(0,l.jsx)("option",{value:"Q",children:"Q — до 25%"}),(0,l.jsx)("option",{value:"H",children:"H — до 30%"})]})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Цвет точек"}),(0,l.jsx)("input",{type:"color",value:m.style.foreground,onChange:e=>D({foreground:e.target.value})})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Цвет фона"}),(0,l.jsx)("input",{type:"color",value:m.style.background,onChange:e=>D({background:e.target.value})})]}),(0,l.jsx)("label",{className:"panel__field",children:(0,l.jsxs)("span",{children:[(0,l.jsx)("input",{type:"checkbox",checked:m.style.useDotsGradient,onChange:e=>D({useDotsGradient:e.target.checked}),style:{width:"auto",marginRight:"8px"}}),"Градиент для QR кода"]})}),m.style.useDotsGradient&&m.style.dotsGradient&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Тип градиента"}),(0,l.jsxs)("select",{value:m.style.dotsGradient.type,onChange:e=>D({dotsGradient:{...m.style.dotsGradient,type:e.target.value}}),children:[(0,l.jsx)("option",{value:"linear",children:"Линейный"}),(0,l.jsx)("option",{value:"radial",children:"Радиальный"})]})]}),"linear"===m.style.dotsGradient.type&&(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Угол поворота, \xb0"}),(0,l.jsx)("input",{type:"range",min:0,max:360,value:Math.round((m.style.dotsGradient.rotation||0)/Math.PI*180),onChange:e=>D({dotsGradient:{...m.style.dotsGradient,rotation:Number(e.target.value)/180*Math.PI}})}),(0,l.jsx)("strong",{children:Math.round((m.style.dotsGradient.rotation||0)/Math.PI*180)})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Начальный цвет градиента"}),(0,l.jsx)("input",{type:"color",value:m.style.dotsGradient.colorStops[0].color,onChange:e=>D({dotsGradient:{...m.style.dotsGradient,colorStops:[{...m.style.dotsGradient.colorStops[0],color:e.target.value},m.style.dotsGradient.colorStops[1]]}})})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Конечный цвет градиента"}),(0,l.jsx)("input",{type:"color",value:m.style.dotsGradient.colorStops[1].color,onChange:e=>D({dotsGradient:{...m.style.dotsGradient,colorStops:[m.style.dotsGradient.colorStops[0],{...m.style.dotsGradient.colorStops[1],color:e.target.value}]}})})]})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Стиль точек"}),(0,l.jsxs)("select",{value:m.style.dotStyle,onChange:e=>D({dotStyle:e.target.value}),children:[(0,l.jsx)("option",{value:"square",children:"Квадрат"}),(0,l.jsx)("option",{value:"rounded",children:"Скруглённый"}),(0,l.jsx)("option",{value:"extra-rounded",children:"Очень скруглённый"}),(0,l.jsx)("option",{value:"dots",children:"Точки"}),(0,l.jsx)("option",{value:"classy",children:"Classy"}),(0,l.jsx)("option",{value:"classy-rounded",children:"Classy Rounded"})]})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Внешние глазки"}),(0,l.jsxs)("select",{value:m.style.eyeOuter,onChange:e=>D({eyeOuter:e.target.value}),children:[(0,l.jsx)("option",{value:"square",children:"Квадрат"}),(0,l.jsx)("option",{value:"extra-rounded",children:"Скруглённый"}),(0,l.jsx)("option",{value:"dot",children:"Точка"})]})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Внутренние глазки"}),(0,l.jsxs)("select",{value:m.style.eyeInner,onChange:e=>D({eyeInner:e.target.value}),children:[(0,l.jsx)("option",{value:"square",children:"Квадрат"}),(0,l.jsx)("option",{value:"dot",children:"Точка"})]})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Логотип"}),(0,l.jsx)("input",{type:"file",accept:"image/png,image/jpeg,image/svg+xml",onChange:e=>{var t,n;return P(null!==(n=null===(t=e.target.files)||void 0===t?void 0:t[0])&&void 0!==n?n:null)}}),m.style.logoDataUrl?(0,l.jsxs)("div",{className:"panel__thumb",children:[(0,l.jsx)("img",{src:m.style.logoDataUrl,alt:"Логотип"}),(0,l.jsx)("button",{type:"button",onClick:()=>P(null),className:"text",children:"Удалить"})]}):null]}),m.style.logoDataUrl?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Размер логотипа, %"}),(0,l.jsx)("input",{type:"range",min:10,max:30,value:m.style.logoSize,onChange:e=>D({logoSize:Number(e.target.value)})}),(0,l.jsx)("strong",{children:m.style.logoSize})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Скрыть точки под логотипом"}),(0,l.jsx)("input",{type:"checkbox",checked:m.style.hideBackgroundDots,onChange:e=>D({hideBackgroundDots:e.target.checked})})]})]}):null,(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Форма QR-кода"}),(0,l.jsxs)("select",{value:m.style.shape,onChange:e=>D({shape:e.target.value}),children:[(0,l.jsx)("option",{value:"square",children:"Квадрат"}),(0,l.jsx)("option",{value:"circle",children:"Круг"})]})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Градиент точек"}),(0,l.jsx)("input",{type:"checkbox",checked:m.style.useDotsGradient,onChange:e=>D({useDotsGradient:e.target.checked})})]}),m.style.useDotsGradient&&m.style.dotsGradient?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Тип градиента точек"}),(0,l.jsxs)("select",{value:m.style.dotsGradient.type,onChange:e=>D({dotsGradient:{...m.style.dotsGradient,type:e.target.value}}),children:[(0,l.jsx)("option",{value:"linear",children:"Линейный"}),(0,l.jsx)("option",{value:"radial",children:"Радиальный"})]})]}),"linear"===m.style.dotsGradient.type?(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Угол поворота, \xb0"}),(0,l.jsx)("input",{type:"range",min:0,max:360,value:m.style.dotsGradient.rotation||0,onChange:e=>D({dotsGradient:{...m.style.dotsGradient,rotation:Number(e.target.value)}})}),(0,l.jsx)("strong",{children:m.style.dotsGradient.rotation||0})]}):null,(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Начальный цвет"}),(0,l.jsx)("input",{type:"color",value:(null===(e=m.style.dotsGradient.colorStops[0])||void 0===e?void 0:e.color)||"#000000",onChange:e=>{let t=[...m.style.dotsGradient.colorStops];t[0]={...t[0],color:e.target.value},D({dotsGradient:{...m.style.dotsGradient,colorStops:t}})}})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Конечный цвет"}),(0,l.jsx)("input",{type:"color",value:(null===(t=m.style.dotsGradient.colorStops[1])||void 0===t?void 0:t.color)||"#000000",onChange:e=>{let t=[...m.style.dotsGradient.colorStops];t[1]={...t[1],color:e.target.value},D({dotsGradient:{...m.style.dotsGradient,colorStops:t}})}})]})]}):null,(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Градиент фона"}),(0,l.jsx)("input",{type:"checkbox",checked:m.style.useBackgroundGradient,onChange:e=>D({useBackgroundGradient:e.target.checked})})]}),m.style.useBackgroundGradient&&m.style.backgroundGradient?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Тип градиента фона"}),(0,l.jsxs)("select",{value:m.style.backgroundGradient.type,onChange:e=>D({backgroundGradient:{...m.style.backgroundGradient,type:e.target.value}}),children:[(0,l.jsx)("option",{value:"linear",children:"Линейный"}),(0,l.jsx)("option",{value:"radial",children:"Радиальный"})]})]}),"linear"===m.style.backgroundGradient.type?(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Угол поворота, \xb0"}),(0,l.jsx)("input",{type:"range",min:0,max:360,value:m.style.backgroundGradient.rotation||0,onChange:e=>D({backgroundGradient:{...m.style.backgroundGradient,rotation:Number(e.target.value)}})}),(0,l.jsx)("strong",{children:m.style.backgroundGradient.rotation||0})]}):null,(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Начальный цвет фона"}),(0,l.jsx)("input",{type:"color",value:(null===(a=m.style.backgroundGradient.colorStops[0])||void 0===a?void 0:a.color)||"#ffffff",onChange:e=>{let t=[...m.style.backgroundGradient.colorStops];t[0]={...t[0],color:e.target.value},D({backgroundGradient:{...m.style.backgroundGradient,colorStops:t}})}})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Конечный цвет фона"}),(0,l.jsx)("input",{type:"color",value:(null===(r=m.style.backgroundGradient.colorStops[1])||void 0===r?void 0:r.color)||"#ffffff",onChange:e=>{let t=[...m.style.backgroundGradient.colorStops];t[1]={...t[1],color:e.target.value},D({backgroundGradient:{...m.style.backgroundGradient,colorStops:t}})}})]})]}):null,(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Градиент углов"}),(0,l.jsx)("input",{type:"checkbox",checked:m.style.useCornersGradient,onChange:e=>D({useCornersGradient:e.target.checked})})]}),m.style.useCornersGradient&&m.style.cornersGradient?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Тип градиента углов"}),(0,l.jsxs)("select",{value:m.style.cornersGradient.type,onChange:e=>D({cornersGradient:{...m.style.cornersGradient,type:e.target.value}}),children:[(0,l.jsx)("option",{value:"linear",children:"Линейный"}),(0,l.jsx)("option",{value:"radial",children:"Радиальный"})]})]}),"linear"===m.style.cornersGradient.type?(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Угол поворота, \xb0"}),(0,l.jsx)("input",{type:"range",min:0,max:360,value:m.style.cornersGradient.rotation||0,onChange:e=>D({cornersGradient:{...m.style.cornersGradient,rotation:Number(e.target.value)}})}),(0,l.jsx)("strong",{children:m.style.cornersGradient.rotation||0})]}):null,(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Начальный цвет углов"}),(0,l.jsx)("input",{type:"color",value:(null===(o=m.style.cornersGradient.colorStops[0])||void 0===o?void 0:o.color)||"#000000",onChange:e=>{let t=[...m.style.cornersGradient.colorStops];t[0]={...t[0],color:e.target.value},D({cornersGradient:{...m.style.cornersGradient,colorStops:t}})}})]}),(0,l.jsxs)("label",{className:"panel__field",children:[(0,l.jsx)("span",{children:"Конечный цвет углов"}),(0,l.jsx)("input",{type:"color",value:(null===(y=m.style.cornersGradient.colorStops[1])||void 0===y?void 0:y.color)||"#000000",onChange:e=>{let t=[...m.style.cornersGradient.colorStops];t[1]={...t[1],color:e.target.value},D({cornersGradient:{...m.style.cornersGradient,colorStops:t}})}})]})]}):null]}),(0,l.jsxs)("div",{className:"preview","aria-live":"polite",children:[(0,l.jsx)("div",{ref:C,className:"preview__canvas"}),(0,l.jsxs)("div",{className:"preview__actions",children:[(0,l.jsx)("button",{type:"button",onClick:()=>R("png"),className:"primary",children:"Скачать PNG"}),(0,l.jsx)("button",{type:"button",onClick:()=>R("svg"),className:"secondary",children:"Скачать SVG"})]})]})]})]})]})}function m(){return(0,l.jsx)("div",{className:"skeleton",children:(0,l.jsx)("div",{className:"skeleton-pulse"})})}n(5683);let f=r()(()=>Promise.all([n.e(425),n.e(491),n.e(409)]).then(n.bind(n,4570)).then(e=>({default:e.BatchGenerator})),{loadableGenerated:{webpack:()=>[4570]},loading:()=>(0,l.jsx)(m,{}),ssr:!1}),g=r()(()=>Promise.all([n.e(735),n.e(996)]).then(n.bind(n,996)).then(e=>({default:e.Scanner})),{loadableGenerated:{webpack:()=>[996]},loading:()=>(0,l.jsx)(m,{}),ssr:!1});function x(){return(0,l.jsxs)("main",{className:"page",children:[(0,l.jsxs)("header",{className:"page__hero",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{children:"QR Suite"}),(0,l.jsx)("p",{children:"Генератор, пакетная сборка и сканер QR-кодов. Полностью офлайн, с поддержкой всех ключевых форматов и автосохранением черновиков в IndexedDB."})]}),(0,l.jsxs)("div",{className:"page__hero-meta",children:[(0,l.jsx)("span",{children:"Коррекция H"}),(0,l.jsx)("span",{children:"10k файлов"}),(0,l.jsx)("span",{children:"Web Worker"})]})]}),(0,l.jsx)(y,{}),(0,l.jsx)(f,{}),(0,l.jsx)(g,{}),(0,l.jsx)("footer",{className:"page__footer",children:(0,l.jsxs)("p",{children:["Черновики хранятся локально. Поддерживается CSV поле ",(0,l.jsx)("code",{children:"slug"})," для будущей миграции на динамические ссылки."]})})]})}},9785:function(e,t,n){"use strict";let l,a;n.d(t,{L:function(){return S}});var r,s=n(4090);let o=(e,t)=>t.some(t=>e instanceof t),i=new WeakMap,d=new WeakMap,c=new WeakMap,u=new WeakMap,p=new WeakMap,h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return d.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function y(e){var t;if(e instanceof IDBRequest)return function(e){let t=new Promise((t,n)=>{let l=()=>{e.removeEventListener("success",a),e.removeEventListener("error",r)},a=()=>{t(y(e.result)),l()},r=()=>{n(e.error),l()};e.addEventListener("success",a),e.addEventListener("error",r)});return t.then(t=>{t instanceof IDBCursor&&i.set(t,e)}).catch(()=>{}),p.set(t,e),t}(e);if(u.has(e))return u.get(e);let n="function"==typeof(t=e)?t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=Array(e),l=0;l<e;l++)n[l]=arguments[l];return t.apply(m(this),n),y(i.get(this))}:function(){for(var e=arguments.length,n=Array(e),l=0;l<e;l++)n[l]=arguments[l];return y(t.apply(m(this),n))}:function(e){for(var n=arguments.length,l=Array(n>1?n-1:0),a=1;a<n;a++)l[a-1]=arguments[a];let r=t.call(m(this),e,...l);return c.set(r,e.sort?e.sort():[e]),y(r)}:(t instanceof IDBTransaction&&function(e){if(d.has(e))return;let t=new Promise((t,n)=>{let l=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",r),e.removeEventListener("abort",r)},a=()=>{t(),l()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),l()};e.addEventListener("complete",a),e.addEventListener("error",r),e.addEventListener("abort",r)});d.set(e,t)}(t),o(t,l||(l=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(t,h):t;return n!==e&&(u.set(e,n),p.set(n,e)),n}let m=e=>p.get(e),f=["get","getKey","getAll","getAllKeys","count"],g=["put","add","delete","clear"],x=new Map;function v(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(x.get(t))return x.get(t);let n=t.replace(/FromIndex$/,""),l=t!==n,a=g.includes(n);if(!(n in(l?IDBIndex:IDBObjectStore).prototype)||!(a||f.includes(n)))return;let r=async function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];let o=this.transaction(e,a?"readwrite":"readonly"),i=o.store;return l&&(i=i.index(r.shift())),(await Promise.all([i[n](...r),a&&o.done]))[0]};return x.set(t,r),r}h={...r=h,get:(e,t,n)=>v(e,t)||r.get(e,t,n),has:(e,t)=>!!v(e,t)||r.has(e,t)};let j="drafts";async function b(){return function(e,t){let{blocked:n,upgrade:l,blocking:a,terminated:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=indexedDB.open(e,1),o=y(s);return l&&s.addEventListener("upgradeneeded",e=>{l(y(s.result),e.oldVersion,e.newVersion,y(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{r&&e.addEventListener("close",()=>r()),a&&e.addEventListener("versionchange",e=>a(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("qr-suite",1,{upgrade(e){e.objectStoreNames.contains(j)||e.createObjectStore(j)}})}async function G(e){var t;let n=await b();return null!==(t=await n.get(j,e))&&void 0!==t?t:null}async function _(e,t){let n=await b();await n.put(j,t,e)}async function N(e){let t=await b();await t.delete(j,e)}function S(e,t){let[n,l]=(0,s.useState)(t),[a,r]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let t=!0;return G(e).then(e=>{t&&e&&l(e),t&&r(!0)}),()=>{t=!1}},[e]),(0,s.useEffect)(()=>{a&&_(e,n).catch(e=>{console.warn("Не удалось сохранить черновик",e)})},[e,n,a]);let o=async()=>{l(t),await N(e)};return{value:n,setValue:l,hydrated:a,reset:o}}},4113:function(e,t,n){"use strict";n.d(t,{u:function(){return s},x:function(){return o}});let l=[{type:"url",title:"URL",description:"Автодобавление схемы и базовая валидация",fields:[{name:"url",label:"Ссылка",placeholder:"example.com/page",required:!0,validate:e=>{let t=e.trim();if(!t)return"Укажите ссылку";let n=t.startsWith("http")?t:"https://".concat(t);try{if(!new URL(n).hostname.includes("."))return"Укажите корректный домен"}catch(e){return"Некорректный URL"}return null}}],buildPayload:e=>{var t,n;let l=null!==(n=null===(t=e.url)||void 0===t?void 0:t.trim())&&void 0!==n?n:"";return l?l.startsWith("http")?l:"https://".concat(l):""}},{type:"text",title:"Текст",description:"Любой UTF-8 текст",fields:[{name:"text",label:"Текст",type:"textarea",placeholder:"Введите текст",required:!0}],buildPayload:e=>{var t;return null!==(t=e.text)&&void 0!==t?t:""}},{type:"tel",title:"Телефон",description:"tap-to-call",fields:[{name:"phone",label:"Номер",placeholder:"+7 900 000-00-00",required:!0,validate:e=>{let t=e.replace(/[^\d+]/g,"");return/^\+?[\d]{5,15}$/.test(t)?null:"Введите телефон в формате +79991234567"}}],buildPayload:e=>{var t,n;return"tel:".concat(null!==(n=null===(t=e.phone)||void 0===t?void 0:t.replace(/[^\d+]/g,""))&&void 0!==n?n:"")}},{type:"sms",title:"SMS",description:"SMSTO: номер и текст",fields:[{name:"phone",label:"Номер",required:!0,placeholder:"+79001234567"},{name:"message",label:"Сообщение",type:"textarea",placeholder:"Текст SMS"}],buildPayload:e=>{var t,n,l;let a=null!==(n=null===(t=e.phone)||void 0===t?void 0:t.replace(/[^\d+]/g,""))&&void 0!==n?n:"",r=encodeURIComponent(null!==(l=e.message)&&void 0!==l?l:"");return"SMSTO:".concat(a,":").concat(r)}},{type:"mailto",title:"Email",description:"mailto: адрес, тема, тело",fields:[{name:"address",label:"Email",type:"email",required:!0},{name:"subject",label:"Тема"},{name:"body",label:"Сообщение",type:"textarea"}],buildPayload:e=>{var t;let n=new URLSearchParams;e.subject&&n.set("subject",e.subject),e.body&&n.set("body",e.body);let l=n.toString();return"mailto:".concat(null!==(t=e.address)&&void 0!==t?t:"").concat(l?"?".concat(l):"")}},{type:"geo",title:"Геометка",description:"Координаты lat,lng",fields:[{name:"lat",label:"Широта",required:!0,helper:"Напр. 59.9386"},{name:"lng",label:"Долгота",required:!0,helper:"Напр. 30.3141"},{name:"label",label:"Описание"}],buildPayload:e=>{var t,n;let l=null===(t=e.lat)||void 0===t?void 0:t.trim(),a=null===(n=e.lng)||void 0===n?void 0:n.trim();if(!l||!a)return"";let r=e.label?"?q=".concat(encodeURIComponent(e.label)):"";return"geo:".concat(l,",").concat(a).concat(r)}},{type:"wifi",title:"Wi-Fi",description:"SSID, тип, пароль",fields:[{name:"ssid",label:"SSID",required:!0},{name:"auth",label:"Шифрование",placeholder:"WPA, WPA2, WEP или nopass",helper:"nopass для открытых сетей"},{name:"password",label:"Пароль"},{name:"hidden",label:"Скрытая сеть (true/false)",placeholder:"false"}],buildPayload:e=>{var t,n,l,r;let s=null!==(l=e.ssid)&&void 0!==l?l:"",o=(null===(t=e.auth)||void 0===t?void 0:t.toUpperCase())||"WPA",i=null!==(r=e.password)&&void 0!==r?r:"",d=(null===(n=e.hidden)||void 0===n?void 0:n.toLowerCase())==="true"?";H:true":"";return"WIFI:T:".concat(o,";S:").concat(a(s),";P:").concat(a(i)).concat(d,";;")}},{type:"vcard",title:"vCard",description:"Контакты vCard 3.0",fields:[{name:"firstName",label:"Имя",required:!0},{name:"lastName",label:"Фамилия"},{name:"organization",label:"Компания"},{name:"title",label:"Должность"},{name:"phone",label:"Телефон"},{name:"email",label:"Email"},{name:"website",label:"Сайт"},{name:"notes",label:"Заметки",type:"textarea"}],buildPayload:e=>{var t,n;let l=["BEGIN:VCARD","VERSION:3.0","N:".concat(null!==(t=e.lastName)&&void 0!==t?t:"",";").concat(null!==(n=e.firstName)&&void 0!==n?n:"",";;;"),"FN:".concat([e.firstName,e.lastName].filter(Boolean).join(" "))];return e.organization&&l.push("ORG:".concat(e.organization)),e.title&&l.push("TITLE:".concat(e.title)),e.phone&&l.push("TEL;TYPE=CELL:".concat(e.phone)),e.email&&l.push("EMAIL;TYPE=INTERNET:".concat(e.email)),e.website&&l.push("URL:".concat(e.website)),e.notes&&l.push("NOTE:".concat(e.notes)),l.push("END:VCARD"),l.join("\n")}},{type:"mecard",title:"MeCard",description:"Компактный формат визитки",fields:[{name:"name",label:"Имя",required:!0},{name:"phone",label:"Телефон"},{name:"email",label:"Email"},{name:"address",label:"Адрес",type:"textarea"},{name:"note",label:"Заметка",type:"textarea"}],buildPayload:e=>{var t;let n=["MECARD:N:".concat(null!==(t=e.name)&&void 0!==t?t:"",";")];return e.phone&&n.push("TEL:".concat(e.phone,";")),e.email&&n.push("EMAIL:".concat(e.email,";")),e.address&&n.push("ADR:".concat(e.address,";")),e.note&&n.push("NOTE:".concat(e.note,";")),n.push(";"),n.join("")}},{type:"ics",title:"Событие ICS",description:"iCalendar (VEVENT)",fields:[{name:"summary",label:"Заголовок",required:!0},{name:"description",label:"Описание",type:"textarea"},{name:"location",label:"Место"},{name:"start",label:"Начало (ISO 8601)",placeholder:"2024-03-12T10:00"},{name:"end",label:"Конец (ISO 8601)",placeholder:"2024-03-12T12:00"}],buildPayload:e=>{let t=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT"];return e.summary&&t.push("SUMMARY:".concat(e.summary)),e.description&&t.push("DESCRIPTION:".concat(e.description)),e.location&&t.push("LOCATION:".concat(e.location)),e.start&&t.push("DTSTART:".concat(r(e.start))),e.end&&t.push("DTEND:".concat(r(e.end))),t.push("END:VEVENT","END:VCALENDAR"),t.join("\n")}}];function a(e){return e.replace(/([\\;",:])/g,"\\$1")}function r(e){try{let t=new Date(e);if(Number.isNaN(t.getTime()))return e;return t.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z"}catch(t){return e}}let s=l;function o(e){return function(e){let t=l.find(t=>t.type===e);if(!t)throw Error("Unsupported QR type: ".concat(e));return t}(e)}},5683:function(){},6480:function(e,t){"use strict";var n;!/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/function(){var l={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=r(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)l.call(e,n)&&e[n]&&(t=r(t,n));return t}(n)))}return e}function r(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0!==(n=(function(){return a}).apply(t,[]))&&(e.exports=n)}()}},function(e){e.O(0,[971,69,744],function(){return e(e.s=2019)}),_N_E=e.O()}]);